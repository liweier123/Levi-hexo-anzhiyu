<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>企业网络搭建笔记 | 利威尔</title><meta name="keywords" content="自己写的笔记有不对的地方官请指正在评论区中"><meta name="author" content="XF"><meta name="copyright" content="XF"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="企业网络搭建笔记"><meta name="application-name" content="企业网络搭建笔记"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="企业网络搭建笔记"><meta property="og:url" content="http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="利威尔"><meta property="og:description" content="[TOC] 企业网搭建笔记单位换算:字节:byte          比特:bit 1byte&amp;#x3D;8bit 1KB&amp;#x3D;1024Byte 1Kb&amp;#x3D;1024b 1MBps&amp;#x3D;1024KB 1Mbps&amp;#x3D;1024Kb 1MB&amp;#x3D;1048576 Byte 1"><meta property="og:locale" content="en"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="XF"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="[TOC] 企业网搭建笔记单位换算:字节:byte          比特:bit 1byte&amp;#x3D;8bit 1KB&amp;#x3D;1024Byte 1Kb&amp;#x3D;1024b 1MBps&amp;#x3D;1024KB 1Mbps&amp;#x3D;1024Kb 1MB&amp;#x3D;1048576 Byte 1"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: XF","link":"Link: ","source":"Source: 利威尔","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '利威尔',
  title: '企业网络搭建笔记',
  postAI: '',
  pageFillDescription: '企业网搭建笔记, 单位换算, OSI 七层模型, 物理层, 数据链路层, 网络层, 传输层, 会话层, 表示层, 应用层, 远程连接, 指令, IP地址划分：, VLSM(Variable Length Subnet Masking), 概念：, ipv6, 一个16进制数由4个二进制数构成, ipv6由前64位组成前缀（网络部分）后64位组成接口id, VLAN(虚拟局域网802.1Q), 指令：, arp攻击：, 概念：, Arp欺骗原理：, 防止arp攻击：, 静态ARP绑定：, 指令：, STP生成树协议, 概念：, stp运行原理：x2Fx2F, 指令：, 端口环路检测简介：, 指令：, RSTP生成树协议：, MSTP生成树协议：, 概念：, 指令：, 端口配置, 速率和最大传输单元的区别, 端口安全：, 端口安全概念：, 指令：, SNMP(陷进通知), 链路聚合：, 链路聚合配置命令：, 时钟速率, 端口镜像(span-交换机端口分析)：, 概念：, 特点：, 指令：, vrrp（虚拟局域网冗余协议）：, 概念：, 指令：, DHCP(动态主机分配协议), 概念：, DHCP的作用：, DHCP通信过程：, 指令：, DHCP 中继代理(DHCP Relay)：, 概念：, 指令：, DHCP snooping (DHCP监听)：, 概念：, 指令：, 静态路由, 概念：, 指令：, Rip动态路由协议(十年前就被淘汰), 指令：, RIP的路由条目更新规则：, PBR(策略路由), 与普通路由的区别：普通路由是根据目标地址来选择路径策略路由是根据源地址来选择路径, 概念：, 应用场景：, 配置：, acl(扩展extended)：, 五元组：, 特点：, 指令：, alc工作原理, 应用场景：, 指令：, chap认证(挑战握手协议)：, 指令：, QOS(服务质量流量带宽控制), 概念：, 不同设备上的QOS：, 背景：, 原理：, 配置：, 进行流分类标记, 概念：, 执行过程：, Portal认证：, 特点：, 注意事项(802.1x和NAC)：, BGP(边界路由协议), 概念：, 试卷案例命令, vrf(virtual routing and forwarding虚拟路由表), sflow(网络资源监视), 无线控制器与接入点：, 胖AP(fat)和瘦AP(fit)：, vap（多少个WiFi就创建多少个vap）, 使用场景：, capwap隧道建立的过程：, vrf(虚拟路由转发)企业网搭建笔记单位换算字节比特七层模型物理层物理层比特流传输数据链路层数据链路层控制网络层和物理层之间的通信数据链路层协议由很多种协议解决各端链路之间的协议标准每台路由器之间的链路使用的协议都有可能不一样比如说以太网协议适合广播型协议帧中继协议协议适用于点到点协议适合无线网络为了让整个网络的性能更加强大可以在不同的链路段使用不同的协议网络层网络层寻址和路由选择路由技术是网络工程师核心技术之一直接影响到各个互联网的应用体验使用的协议统一网络层基于地址进行路由转发传输层传输层建立维护管理端到端连接两个端之间建立连接对数据完整性要求高使用保障数据传输的完整性但是成本比高速度慢语音视频这类实时采集的数据没有文件完整性一说而是采集多少就传输多少就用会话层会话层建立维护管理会话连接两个之间的会话是否可以对接表示层表示层数据格式化加密解密对数据进行加密就是相当于独创一套编码方式只有自己人才知道解码方式则可以实现数据加密我们看到的听到的都是用计算机的编码来表示用编码来表示图片数据用或编码来表示声音数据用或编码来表示视频数据应用层应用层为应用程序提供网络服务用户里面的数据图片声音文字远程连接指令进入密码配置模式表示开启远程虚拟线路允许共个用户同时登入到路由器对登陆设备启用基于用户名和密码的认证配置用户名为和密码为设置用户特权级别是最低级别可以执行全部指令权限级别配置密码为只允许传输到线程中生成密钥对用于加密和解密会生成一个公钥一个私钥用于加密数据和验证数字签名指定加密的位数即加密强度默认是位直接回车即可生成加密解密密钥地址划分概念确定地址块首先确定您拥有的地址块这将是您用于划分子网的起点这个地址块应该是一个大的地址范围例如一个或地址块了解子网容量需求确定每个子网所需的地址数量不同的子网可能需要不同数量的地址因此需要了解每个子网的容量需求选择合适的子网掩码对于每个子网选择一个适合其容量需求的子网掩码子网掩码决定了子网的大小因此较大的子网需要较长的子网掩码子网划分使用所选择的子网掩码来划分地址块将其划分为多个子网确保每个子网具有足够的地址以满足其容量需求通常子网的第一个地址用作子网地址网关最后一个地址用作广播地址而中间的地址分配给主机分配子网将每个子网分配给特定的网络或部门根据它们的需求和用途为了更好地组织和管理子网您可以使用文档或命名方案来标识每个子网更新路由表如果您正在配置路由器以支持确保在路由器上更新路由表以反映新的子网划分每个子网应该有正确的路由信息以确保数据包能够正确路由到目标子网更新子网的局域网测试和验证在实际网络中测试和验证您的子网划分确保每个子网按预期工作知道了所需地址数量求需要几位主机号可以用这个公式接近地址数量但不小于的的幂例如需要个地址最接近这个地址数量的的幂是所以主机号位数是位网络号是位每个网段有个可用地址类类类常用地址分类首位类类类地址转换一个进制数由个二进制数构成地址由位进制数和冒号组成组每组位数用隔开从之后用表示到总共位数字的可以缩写缩头不缩尾双冒号表示连续的在一组地址中只能使用一次例如中就是用了双冒号表示连续的通过推断得出双冒号表示组连续的因为总共组进制数概念由前位组成前缀网络部分后位组成接口在前缀中前位由网络服务提供商划分也就是说前位不由老百姓划分中间位则是子网例如你拿到前的公网后就可以用位来划分子网例如表示公司财务表示摄影部虚拟局域网接口交换机虚拟接口给配置地址就变成了接口待解决问题桥接之间不可路由的协议路由虚拟局域网之间的流量指令将端口或者某些端口划分给攻击概念是一种将地址映射为地址的协议它通过广播的方式发送给局域网内的主机主机接受到请求的时候确认是自己的地址就会将自己的地址返回在主机和主机之间主机发送请求主机会现在自己的高速缓存中查找有无对应的地址如果有则在数据帧中添加该主机的地址原理攻击就是通伪造地址和地址实现欺骗能够在网络中产生大量的通信量使网络阻塞攻击者只要持续不断的发出伪造的响应包就能更改目标主机缓存中的条目造成网络中断或中间人攻击欺骗原理伪装成网关欺骗源把自己或者其他非网关主机伪装成网关向局域网内的目标主机发送应答报文使得局域网内的主机误以为欺骗源的地址是网关的地址并将原本应该流向网关的数据都发送到欺骗源将局域网内某设备的地址映射为非法的地址从而进行监听截获被非法映射地址的主机的报文例如发送报文通告的地址映射为自己的地址将导致本应该发送给的报文全部发送到了攻击过程某机器要向主机发送报文会查询本地的缓存表找到的地址对应的地址后就会进行数据传输如果未找到则广播一个请求报文携带主机的地址物理地址请求地址为的主机回答物理地址网上所有主机包括都收到请求但只有主机识别自己的地址于是向主机发回一个响应报文防止攻击将地址与每台终端设备绑定发现攻击源直接将其断网交换机记录每个接口对应的地址和生成检测表交换机检测每个接口发送过来的回应包根据表判新是否违规若违规则丢弃此数据包并对接口进行惩罚静态绑定明确指定哪个地址应该与哪个地址关联防御攻击和欺骗最直接的方式是进行地址绑定用户通过在主机和网关路由器上实现双向地址和地址绑定即可提高其网络的安全性指令静态映射到查看绑定设置流量出口注意配置静态绑定可以提高网络的安全性和性能但需要谨慎管理因为手动维护绑定可能会变得复杂特别是在大型网络中因此只应在需要时使用静态绑定例如保护重要服务器或网络设备生成树协议概念是为了解决网络中的环路问题的一个协议当网络中有多余通信路径的时候会选择一条主要路径阻塞备用端口因此网络拓扑类似树枝所以叫做生成树协议运行原理选举根交换机选举根交换机是通过比较网桥来选举的网桥的组成如下优先级地址默认为选举根端口根端口用于接收数据帧也用于接受普通流量选举条件根据端口带宽的速率的成本值非根交换机根交换机的成本值最低的为根端口成本一样则比较端口选举指定端口在每个网段上面选择每个网段有且只有一个指定端口用于转发跟交换接收数据帧也转发普通流量选举条件根交换机的所有端口都是指定端口根端口的对端端口一定是指定端口网段中转发端口到根交换机路径开销最小的本段端口阻塞备用端口指令打开生成树一般默认打开配置优先级配置端口环路检测进入接口配置模式选择要配置的业务端口启用功能以允许快速收敛启用功能以检测不一致的并关闭端口防止环路问题启用功能以防止端口成为即使不再接收配置参数确保在无环路情况下每秒发送次存在环路时每秒发送次退出接口配置模式针对其他业务端口重复上述步骤进行配置最后保存配置并退出配置模式端口环路检测简介二层网路中的通信报文的转发直接通过寻址地址学习的正确与否决定着用户之间是否能够正确的互通在二层交换中通过地址寻址来进行报文转发二层设备的地址学习都是通过源地址学习来进行的即当端口收到一个未知源地址的报文会将这个添加到接收端口上以便后续以该地址为目的的报文能够直接转发即一次学习多测转发环路的诞生当新来源的地址发现该地址已经学习到了二层设备上但源端口不一样会修改原来地址的源端口如果当指令神州数码单端口检测配置环路检测的时间间隔启动端口环路检测功能配置端口环路控制方式显示和调试端口环路检测相关信息配置环路检测受控方式是否自动恢复有环路时无环路时回路检测只适用于显示端口环路检测状态和检测结果输入参数则显示对应端口显示端口环路信息检测相关信息生成树协议为什么需要的缺陷从初始状态到完全收敛至少需经过交换机有端口阻塞端口根端口掉切换成端口并进入转发状态至少需要经过交换机无端口端口掉其他交换机的端口切换成指定端口并进入转发状态大约费要交换机连接终端的链路进入转发雯要经过三种端口状态从用户使用的角度对应的行为都相同但是呈现出不同的状态反而增加了使用难度的优化定义了两种新角色备份端口和预备端口状态缩减从种缩减到种状态状态解释状态对应的行为如果不转发用户流量也不学习地址那么端口状态就是状态如果不转发用户流量但是学习地址那么端口状态就是状态如果不转发用户流量但是学习地址那么端口状态就是状态在选举的过程中加入了发起请求回复同意机制这种确认机制由于每个步骤有确认就不需要依赖计时器来保证网络拓扑无环才去转发只需要考虑发送报文并计算无环拓扑的时间一般都是秒级其目的是使一个指定端口尽快进入状态生成树协议概念在的基础之上如果多个主机使用一个生成树那么会导致带宽不够从而导致网络速度慢的问题所以诞生了具有多案例的特点也就是说可以生成多个生成树链路从而利用冗余链路提升网路速度和冗余性并兼顾了可靠性注通常和一同使用这样可以保证可靠的情况下不会浪费多余链路的带宽提升冗余性可靠性安全性指令打开协议锐捷设备默认起开了切换模式设备默认启用模式是进入配置模式把组添加到一个中范围为范围为指定配置名称该字符串最多可以有个字节指定范围为默认值是针对不同的配置设备的优先级优先级用于生成树计算取值必须是的整数倍最小为默认值为生成树优化打开该的该端口直接工作为转发状态但会因为收到而使为从而正常地参与算法而该功能一般会与一起使用全局地打开端口打开后如果在该端口上收到则会进入状态接口开启功能接口违规关闭后指定接口自动恢复时间间隔打开后相应端口会既不发也不收接口开启功能端口配置双工模式指端口可以同时发送和接收数据半工模式指端口只能在特定时间发送或者接收数据通信效率比较低千兆位每秒的速率是一种网络端口的规格和标准百兆位每秒是指用光纤作为传输介质的百兆速率端口表示全双工模式即同时发送或接收数据表示半双工模式只能在某个时刻要么发送数据要么接收数据速率和最大传输单元的区别速率表示网络连接的带宽即规定时间内可以传输的数据量例如兆每秒最大传输单元表示网络通信中可以传输的数据包的最大尺寸它以字节表示例如即兆字节端口安全作用端口安全的主要目标是确保只有经过授权的设备可以连接到交换机上的特定端口这可以防止未经授权的设备进入网络减少网络安全风险在限制哪些设备可以连接到网络端口通常是交换机端口以及它们可以访问的资源端口安全通常用于有线网络中尤其是以太网网络端口安全概念地址过滤一种常见的端口安全技术是使用地址过滤每个网络设备都有一个唯一的地址物理地址它可以用来标识设备通过配置交换机或网络设备管理员可以指定哪些地址可以连接到特定的端口这意味着只有已经授权的设备才能连接到网络并且未授权的设备将被阻止端口状态控制端口安全还允许管理员控制端口的状态这意味着管理员可以设置端口以自动关闭或锁定如果检测到异常行为如多次认证失败连接多个设备或违反其他规则那么端口将被禁用或限制限制设备数量端口安全还可以用于限制连接到特定端口的设备数量这可以防止未经授权的设备通过交换机连接到网络并有助于防止网络拥塞提高网络安全性通过实施端口安全策略网络管理员可以减少未经授权的访问减少网络攻击的风险并提高网络的整体安全性它有助于防止未经授权的设备进入网络并减少了内部和外部威胁指令启动端口安全限制接口上地址只能访问或通信配置端口最大地址数量只允许指定地址的设备接入配置绑定的地址设置后仅能让此地址的设备通过端口违例发生后的处理当安全违例事件发生时将端口置于或模式选择模式时当非法地址或太多连接至该接口时将丢弃数据包并向网管计算机发送陷阱通知选择模式时发生安全错误的端口将被置于错误禁用状态除非网络管理员使用命令手工激活否则该端口失效设置坏包速率限制为该接口指定安全地址也可以使用该命令指定最大安全地址数如果指定的地址数量少于安全地址的最大数量动态学习的地址将被保留设置端口恢复时间禁用错误违例陷进通知链路聚合概念链路聚合用于将多个物理网络连接通常是以太网接口捆绑成一个逻辑连接以提高网络性能可用性冗余性当多个物理链路捆绑在一起的时候它们被视为一个逻辑链路可以增加总带宽如果其中一个链路发生故障流量可以自动切换到其他可用的链路特点逻辑链路链路聚合将多个物理链路组合成一个逻辑链路这个逻辑链路具有一个虚拟的地址和地址带宽增加通过捆绑多个链路链路聚合可以增加总带宽例如如果你有两个的物理链路聚合在一起那么逻辑链路的总带宽将为负载均衡链路聚合可以实现负载均衡将数据流量均匀地分布到各个物理链路上以充分利用带宽故障容忍如果一个物理链路发生故障链路聚合可以自动将流量切换到其他可用链路以保持连通性这提高了网络的可用性协议支持链路聚合通常依赖于特定的协议如或者非标准的协议这些协议用于管理链路聚合并确保各个链路的一致性设备依赖链路聚合需要支持该技术的网络设备包括交换机路由器和服务器网卡所有参与链路聚合的设备必须配置一致链路聚合配置命令创建链路聚合组编号创建聚合组将端口加入聚合组添加成员接口指定接口将接口添加到聚合链路组时钟速率概念时钟速率定义了每秒钟发送和接收数据的位数一遍数据能够在接收端能被正确解释指令频率端口镜像交换机端口分析概念端口镜像功能是指交换机把某一个端口接收或发送的数据帧完全相同的复制给另一个端口其中被复制的端口称为镜像源端口复制的端口称为镜像目的端口特点目的端口只负责接收复制过来的流量而不会对流量进行转发不管是介入流量还是转发流量都只会在目的端口进行接收端口镜像不会改变镜像报文的任何信息也不会影响原有报文的正常转发同时对于源端口目的端口的介质类型没有要求可以是光口镜像到电口也可以是电口的流量镜像到光口对于源端口目的端口的属性没有要求可以是口镜像到口也可以是口镜像到口指令注出入双方向监视创建一个监视会话被复制端口源端口为流量为双向接收或转发都会被复制代表的是监视外部设备的流量不加上只能监视本地数据的流量包仅限于指定的目标口在上开启配置远程功能指定监视会话的目标端口并将复制端口的流量发送到的接口虚拟局域网冗余协议概念是一种网络协议用于提高网络中的路由器的可用性和冗余性它允许多个路由器共享一个虚拟地址其中一个路由器被选为主而其他路由器处于备份状态主路由器接收并处理流量而备份路由器仅在主路由器失效时接管流量指令在组中配置虚拟网关在组中配置优先级默认在组中开启抢占模式在组中监视端口如果端口损坏或无法正常通信则降低优先级动态主机分配协议概念是一种网络协议通常在接入层中配置用于自动分配地址和其他网络配置信息给终端设备以便他们顺利连接到网络的作用地址分配允许网络管理员为设备自动分配地址而不需要手动为每个设备配置地址这使得网络更容易管理特别是在大型网络中子网掩码还可以为设备提供正确的子网掩码以确保设备与其他设备正确通信默认网关它还提供了默认网关的信息允许设备访问其他网络或互联网服务器可以指定服务器的地址使设备能够进行域名解析其他配置选项还可以提供其他配置信息如服务器用于时间同步服务器用于网络等总结是一种非常有用的网络协议使网络管理更加简单和高效同时为设备提供了必要的配置信息以使它们能够顺畅地运行在网络中通信过程注协议是双方遵守的中主机发起广播发现当设备加入网络或需要续订租约时它会广播一个消息以寻找可用的服务器主机发送的信息提供当服务器接受到消息后会广播消息提供地址和其他配置信息服务器或交换机发送的消息请求设备在收到后选择一个服务器提供的地址并向该服务器发送消息请求分配该地址选择之后请求获得这个地址主机发送请求确认服务器在收到消息后确认分配给主机的地址并发送一个消息通知主机可以使用该地址这个消息也是一个广播消息它标志着地址的正式分配服务器确认是否可用指令该命令默认不启用交换机必须配置子网掩码要和所设置地址的子网掩码一致这里都是位掩码设置分配给客户端的地址设置分配给用户的网关地址这个要和核心设备上所设置的地址一致为接口地址需要和地址一致且掩码一致和保持一致修改祖约时间原先的地址池名字区分大小写天小时分钟设置的租约为永久排除地址设定排除地址为这个地址排除多个地址设定排除地址为这个地址排除单个退出到特权模式给某个地址分配特定地址中继代理概念中继通常在分布层或核心层层次中实施中继的作用是将来自不同子网或不同网络的请求传递到具有服务器的子网以便在多子网或多网络环境中分配地址和配置信息注中口是指配置了地址后的虚拟接口也就是说配置了地址就成了接口虚拟接口配置思路配置全网互通接入层交换机中配置并且划分接口到每一个配置中继服务器配置地址池和网关等信息指令该命令默认不启用交换机必须配置该地址需要是服务器地址并且路由可达监听概念监听是一种网络安全功能保护局域网中的设备免受恶意服务器的攻击和不良消息监听使用可信和不可信接口的概念通过流量的路径交换机验证接口上收到的数据包并在受信任接口上跟踪预期的服务器数据包和换句话说不受信任的接口会阻止服务器数据包指令启动侦听指定要实现侦听的设置侦听端口配置端口信任为信任端口三层网络设计模型接入分布核心接入层接入层位于网络层次结构的最底层最靠近终端用户或设备特点接入层主要负责连接终端设备如计算机电话打印机等到网络并提供对网络资源的访问它通常涵盖了局域网的范围因此需要处理用户设备的接入和流量分发功能在接入层通常会使用交换机等设备来管理用户的网络连接执行划分安全策略和服务质量控制等功能层分布层位于核心层和接入层之间起到连接和分发流量的作用特点分布层的主要任务是连接多个接入层并提供路由策略控制和安全性等功能它通常用于将流量从接入层传送到核心层并在不同子网之间执行路由功能在分布层常见的功能包括的汇总路由访问控制列表的实施负载均衡和故障隔离核心层核心层位于网络层次结构的顶层是网络的主干部分连接不同的分布层特点核心层的主要功能是提供高带宽高可用性的网络互连以实现快速数据传输它通常用于在不同分布层之间传递大量的数据流量功能在核心层重要的功能包括高速交换负载均衡冗余路径和故障恢复以确保网络的高可用性和性能注是将源地址转换成目标地址是将池里的地址分配给下层的主机是主机自动请求分配地址而是接入层设备强制进行数据包转换的网络地址转换协议概念用于将一个内部私有地址映射到一个固定的外部公共地址而且这个映射是静态不变的不会随着连接或会话的建立而改变静态与动态的区别静态与动态不同在动态中内部私有地址动态地映射到一个公共地址通常是从一个地址池中分配的而在静态中映射关系是明确指定的一对一的不会随机变化指令动态静态动态创建地址池创建控制列表允许拒绝定义接口为内网外网过滤出来的地址进行内的地址转换静态定义接口为内网或外网将内网地址转换为固定的公网地址配置静态的时候可以起到将某服务器隐藏在内部网络中的作用并且可以指定访问端口负载均衡概念将多个后端服务器的地址映射为统一的外网地址客户端访问时对每次连接请求动态的转换为一个内部服务器地址可以将外网的流量分给内部每台服务器从而实现负载均衡负载均衡策略轮询地址将会在池中循环使用权重分配性能评估端口地址转换地址端口的映射方式因此可以使内部局域网的许多主机共享一个地址访问不光转换地址还会修改端口号这可以让同一个地址为多个设备转换指令创建地址池将访问列表过滤的报文进行地址池内转换接口将过滤的包进行接口上的地址转换静态路由概念网络管理员手动配置的路由表叫做静态路由配置包含目标地址子网掩码下一跳指令下一跳浮动静态路由指令下一跳不同的下一跳动态路由协议十年前就被淘汰注允许一条路径最多只能包含个路由器距离等与是相当于不可达因此只适用于小型互联网仅和相邻路由器交换信息路由表并且是周期性交换例如每交换一次指令开启动态路由版本模式为配置网段每个接口的网段都需要配置路由器刚开始时只知道自己的直连网络距离为目的网络距离下一条直连直连科普网络中收敛当某个网络事件引起路由可用或不可用时路由器就发出更新信息路由更新信息遍及整个网络引发重新计算最佳路径最终达到所有路由器一致公认的最佳路径这个过程即称为收敛的路由条目更新规则和是相邻路由器每隔一个周期发送一次自己的路由表路由器将自己路由表中的信息封装到更新报文中发送给相邻路由器路由器收到报文后对自己路由表进行更新改造开放式最短路径优先协议概念链路状态路由选择协议又被称为最短路径优先协议它基算法他比距离矢量协议复杂的多路由器的链路状态的信息称为链路状态包括接口的地址和子网掩码网络类型如以太网链路或串行点对点链路该链路的开销该链路上的所有的相邻路由器特点链路状态路由协议是层次式的网络中的路由器并不向邻居传递路由项而是通告给邻居一些链路状态链路状态协议只是通告给邻居的一些链路状态运行该路由协议的路由器不是简单地从相邻的路由器学习路由而是把路由器分成区域收集区域的所有的路由器的链路状态信息根据状态信息生产网络拓扑结构每一个路由器再根据拓扑结构计算出路由指令创建进程通告直连网段通告另一个子网段分发默认路由信息重分发路由协议包括子网信息重分发的路由信息度量值禁止发送报文策略路由与普通路由的区别普通路由是根据目标地址来选择路径策略路由是根据源地址来选择路径与的区别服务质量区分是用于控制不同类型的流量的带宽速率保证业务有差别的服务在带宽有限的时候就需要用到是用于控制某种类型的数据包的选路策略比如希望张三访问外网走线路其他人走线路概念是针对某种数据包直接制定的选路策略都是选路那么跟普通路由有什么区别呢举个例子来看现在希望张三访问外网走线路其他人访问外网走线路如果在路由器上用常规路由如何实现是不是发现常规路由无法完成因为常规路由都是按目标地址来选路而这里的需求是按源地址选路只要源地址为张三的数据包就走线路不管目标是什么策略路由的做法是首先用来定义一种特别的数据包比如源地址为张三的包然后再针对这个定义的包配置一个选路策略走线路应用场景多出口网络中同时有电信和联通的线路但是服务器对外映射的是电信的公网那就必须强制服务器从电信线路走这时就需要用策略路由来针对源地址为服务器的数据包做强制走电信线路的规则再比如某些网络安全项目上要求某些关键数据包必须经过安全设备的过滤如下图现在希望税务局访问政务服务器的数据包必须经过安全设备就需要在核心设备上针对税务局的包做策略路由因为选路策略要考虑源地址配置创建策略路由序号为指定这个策略匹配也就是处理的包指定下一跳即流量即将被路由的地址也可以设置数据包的出口建议设置为下一条接口应用策略路由查看路由映射查看列表注意的匹配顺序为从上往下匹配当流量匹配到策略后就按匹配的策略转发数据不会继续往下匹配最后有有一条所有的语句对于没有匹配到策略路由的流量不会把内网的流量丢弃而是做正常的路由转发可以设置下一跳地址也可以设置数据包的出接口建议设置为下一跳的地址缺省路由默认路由概念它的网络地址和子网掩码全是匹配任意网络前缀它是比较特殊的静态路由规则每个可以包含多个规则每个规则根据自上而下的顺序过滤特点读取三层四层头部信息根据预先定义好的规则对流量进行筛选和过滤三层头部信息源目四层头部信息协议源目端口号注意一般情况下标准或扩展一旦编写号无法修改某一条也无法删除某一条也无法修改顺序也无法往中间插入新的条目只能一直在最后添加新的条目如想修改或插入或删除只能删除整张表重新写标准概念访问控制列表是一种基于包数据包过滤的访问控制技术它可以根据设定的条件对接口上的数据包进行过滤允许其通过或丢弃访问控制列表被广泛地应用于路由器和三层交换机借助于访问控制列表可以有效地控制用户对网络的访问从而最大程度地保障网络安全中文名访问控制列表外文名华为设备中过滤的先后顺序是规则的编号规定的编号越小过滤规则越优先在或者锐捷设备中呢是根据配置规则的先后顺序进行一个过滤在过滤执行中如果匹配到了某一条规则则会跳过匹配循环或允许拒绝特点特点表号可以基于源地址进行访问控制只能基于源地址的访问控制不能对一些特定的服务或者端口进行访问控制指令过滤此网段允许过滤源目标的数据包过滤的数据包对进或出接口的数据包进行过滤过滤规则为删除创建标准创建扩展补充扩展五元组包括源目标源端口目标端口协议号协议如等扩展五元组源目标源端口号目标端口号协议号特点表号特点可以基于源目标端口号协议等对包进行过滤注端口表示服务器端口指令允许源地址以协议和目标在端口访问创建扩展控制列表创建标准工作原理使用网络流量控制过滤技术在路由器上读取网络层和传输层的报头信息源目标源端口目标端口通过执行定义的访问规则进行数据流量控制和过滤达到网络访问控制的目的访问控制列表在接口应用的方向出以经过路由器的处理正离开路由器接口的数据包入已到达路由器接口的数据包将被路由器处理注意表必须应用到接口的进或出方向才生效一个接口的一个方向只能应用一张表进还是出方向应用取决于流量控制总方向表是严格自上而下检查每一条所以要注意书写顺序每一条是由条件和动作组成当流量完全满足条件当某流量没有满足某条件则继续检查下一条标准尽量写在靠近目标的地方应用场景指令源地址通配符反掩码允许拒绝后面可加来表示拒绝或允许除了规则以外的全部流量查看控制列表将应用到接口注释反子网掩码将正子网掩码和倒置反子网掩码作用用来匹配条件与对应的需要严格匹配与对应的忽略标准和扩展的区别标准只检查数据包的源地址扩展既检查数据包的源地址也检查数据包的目的地址同时还可以检查数据包的特定协议类型端口号等通配符和反掩码的关系注遇到精确匹配不能够改变遇到可以任意变所以过滤时使用了通配符那么就需要根据通配符来进行过滤在中严格意义上来说地址后的反掩码不算作反掩码因为反掩码的所有字节要么要么主要作用标识网络号和主机号通配符是用来匹配位能不能进行改变如果是则精确匹配固定数则任意匹配任意数例一其中反码是前面两位是所以前面两位都不能改变后面两个都是代表的是所以符合条件的是符合规定的路由如第三张图只有这三个路由被过滤出来例二其中通配符全部都是代表都不能有变化所以符合条件的只有这一条被过滤出来了例三精确到位来进行匹配奇数或偶数匹配在过滤的时候会遇到不是全的反掩码例如其中第三个字节是转换成二进制为其中代表精确匹配则前面七位都是不能改变的由于前面七位都是的幂且不为第位已经是所以前面八位不管怎么变都是偶数偶数就是奇数所以过滤的时候就是的一二字节不变第三字节为奇数第四字节任意的这么一个数如果相匹配偶数则把的那位改成并且与之对应的反掩码将第位写成这样奇数就不存在了就能够过滤偶数这样就能匹配到偶数的地址命名作用可以对标准或者扩展进行自定义命名优点自自定义命名更容易辨认也便于记忆可以任意修改某一条或删除某一条也可以往中间插入某一条自定义表名自定义标准或扩展名只需要在最后写上表名多路由协议混用作用提升冗余性和可靠性不同的协议可以根据不同的度量值来选择最佳路径如果其中一个协议出现故障另一种协议还可以继续提供服务概念路由协议地图路由重分发使用路由重分发特性以交换不同协议创建的路由信息指令度量值认证密码认证协议被认证方以明文的形式发送用户和密码认证方在数据库中检查被认证方的用户和密码是否正确这样的认证方式是不安全的特点被认证方向认证方发送指令开启认证切换为模式认证配置认证端账户密码只有账户密码符合的才能通过认证开启模式后直接配置用户密码是储存在口令数据库里的认证挑战握手协议认证方发送挑战报文包含用户名空第次为最高为随机数被人正方将自己的用户名与随机数密码计算为值发送用户名和给认证方认证方在检索用户名之后再将用户名密码随机数计算成值再与被人正方发送的报文进行比较返回成功失败白话被认证方将本地用户名和发起挑战方发送的报文进行计算将自己的用户名和挑战值值发送给认证方认证方在自己的用户库里找到相同的用户名进行计算与被认证方的挑战值进行对比过后决定是否建立连接即值匹配则建立连接不匹配则发送报文表示认证失败其中没有明文传输密码而是以值作为代替所以是很安全的特点认证端向被认证端发送指令将接口封装为协议启用认证建立本地口令数据库设置地址设置时钟频率被认证账户名设置认证用户名被认证密码设置认证密码设置账户密码客户端配置思路单项认证确定好客户端和服务端在服务端接口上开启认证模式模式切换为客户端不用开启设置时钟频率退出接口设置用户名密码服务端开启认证设置始终频率选择设置认证用户和密码双向认证双方都设置认证和协议设置串口时钟频率设置账号密码互相设置认证账号和认证密码在认证过程中挑战是由服务器端在这个场景中是路由器发起的服务器端路由器配置首先我们需要在路由器上创建一个用户名和密码这将用于客户端的认证然后我们需要在路由器的接口上启用封装和认证客户端主机配置在每个主机上我们也需要创建一个用户名和密码这里的用户名应该与路由器上的用户名相同密码也应该相同然后我们需要在主机的接口上启用封装和认证当主机试图通过路由器访问网络时路由器会发起挑战主机会使用它知道的路由器的用户名和密码来响应挑战如果响应正确路由器就会允许主机访问网络以上就是在设备上配置认证的过程和命令请注意这只是一个基本的示例实际的网络环境可能需要更复杂的配置此外出于安全考虑建议使用更强的密码并定期更改如果你有任何问题请随时向我提问服务质量流量带宽控制概念是服务质量的简称为用户提供有差别的网络服务是对网络流量进行管理的协议从传统意义上来讲无非就是传输的带宽传送的时延数据的丢包率等而提高服务质量无非也就是保证传输的带宽降低传送的时延降低数据的丢包率以及时延抖动等广义上讲服务质量涉及网络应用的方方面面只要是对网络应用有利的措施其实都是在提高服务质量因此从这个意义上来说防火墙策略路由快速转发等也都是提高网络业务服务质量的措施之一在保证某项业务的质量的同时也在损害其他业务的服务质量网络资源是有限的只要存在网络抢占资源的情况就会出现服务质量的高低不同设备上的防火墙上的防火墙通常可以配置规则以便在处理流量时根据规则对流量进行分类和优先级处理这有助于确保关键应用程序的流量获得更高的优先级从而提高网络性能和安全性防火墙可以基于地址端口号协议等条件来进行分类和限制流量速率路由器上的路由器在路由决策时可以应用策略以根据特定的标记或标志来优先路由流量路由器可以根据流量类型源地址目标地址标记等来分类和处理流量此外路由器还可以实施流量整形和排队策略以确保高优先级的流量得到及时处理交换机上的交换机上的主要集中在局域网内的流量管理它可以根据交换机上的端口地址地址等因素来进行流量分类和管理交换机通常实施基于标准的优先级队列例如的三个优先级队列高语音通话中浏览文件备份低以确保高优先级的流量在交换机内的转发时得到更高的优先级背景网络不断发展中规模越来越大使互联网流量激增产生网络堵塞增加转发时延严重的时候还会产生丢包导致业务质量下降甚至不可用所以要在网络上开展实时业务必须解决网络堵塞业务最直接的就是增加带宽但是这无疑是需要巨大成本的所以就在这时候起到作用了在带宽有限的情况下该技术应用一个有保证的策略对网络流量进行管理原理流量分类就是将流量划分为多个优先级或多个服务类配置进行流分类标记尽力而为概念先入先出的规则对时延丢包率等性能不做任何保证默认配置区分服务概念针对实时性较强的服务例如电话视频会议网络直播等为这些在网络上开通单独的通道预留带宽优先级等资源其他应用资源必须保证每个要求服务质量的数据流让路保证他们传输数据时的时延和抖动降低为最低限度比如消防车和救护车一样其他车必须为他们让道如果为所有应用都设置单独通道等于没设指定某项服务的优先级扩展性高综合服务概念服务模型是一个综合服务模型它可以满足多种需求该模型使用资源预留协议运行在从源端到目的端的每个设备上可以监视每个流以防止其消耗资源过多这种体系能够明确区分并保证每一个业务流的服务质量为网络提供最细粒度化的服务质量区分但是模型对设备的要求很高当网络中的数据流数量很大时设备的存储和处理能力会遇到很大的压力模型可扩展性很差难以在核心网络实施很少使用报文的分类和标记区分不同的流量来进行分类简单流分类概念二层中字段等于就是范围层的位范围三层的值前个优先级长度前用于标识优先级保留最后不使用复杂流分类概念小知识双向故障检测这是一种高速故障检测机制两个系统建立会话后会周期性的发送报文如果在一方协商的检测时间没有收到报文则认为这条通路发生了故障吞吐率单位时间内一次性能测试过程中网络上传输的数据量的总和吞吐量指在一次性能测试过程中网络上传输的数据量的总和高并发通过设计系统保证并行处理多个请求每秒响应请求数胖可以单台设置管理模式例如无线路由器多内置地址克隆防火墙等功能瘦不具备单独配置或单独使用的需要搭配无线控制器来使用准入控制功能简称定义是一种网络安全技术目标是确保只有经过授权的设备和用户才能连接到企业或组织的网络通俗的说网络上有一个门卫只有符合规定的设备和用户才能通过这个门进入网络不符合规定的设备会被拒绝入内与的区别主要用于经过授权的设备和用户可以连接到网络它关注的是对网络入口进行管理验证授权设备和用户身份和合规性然后决定是否允许访问网络涉及到身份验证设备健康检测访问策略是一种规则集用于定义那些数据包被允许通过网络设备并决定那些被拒绝用于控制数据包的流量基于源地址目标地址端口号协议等进行过滤不涉及设备身份验证只关注数据包的控制核心功能认证认证扩展认证协议主要目的是为了结局局域网内用户的接入认证问题与点对点认证的区别应用场景认证是对单个设备进行身份验证而是对局域网内的设备进行身份验证和授权确保只有授权用户才能访问网络资源工作方式认证涉及到用户名和密码的验证客户端和服务器之间进行点对点连接之后进行身份验证认证使用了更灵活的身份验证方法通常基于的各种变种目标方面认证通常指在验证连接的两端即客户端和服务端之间的互联主要目的是确保两端的连接都是合法的的主要目标是在局域网或者无线网中对连接到网络中的每个设备进行身份验证和授权它不仅验证设备合法性还确保设备被分配到适当的网络实现网络访问控制和分隔报文在客户端和设备端使用报文封装格式直接承载与坏境中认证方式认证终结认证透传配置过程开启认证概念是一个网络认证协议主要目的是为了解决局域网用户的接入认证问题它就像是一个网络门卫只有合法的用户才能进入网络执行过程启动认证认证过程通常是在客户端设备试图连接到受保护网络时触发的客户端通过发送连接请求来启动认证过程这通常是一个特殊的数据包服务端响应当客户端发送连接请求后网络中的认证服务器会对请求进行响应这个响应通常是一个消息消息是认证的开始要求客户端提供身份信息客户端回应客户端接收到消息后会回应并提供自己的身份信息这通常是一个标识符例如用户名服务端验证客户端提供身份信息后认证服务器介入认证过程认证服务器会验证客户端提供的身份信息是否合法验证方式取决于认证策略和所使用的方法验证可以包括用户名和密码的比对数字证书的验证双因素认证等认证结果根据认证服务器的验证结果认证服务器会向客户端发送成功或失败消息如果认证成功客户端将被授权连接到网络并可以开始访问网络资源如果认证失败客户端将被拒绝连接无法访问网络资源认证特点通过浏览器引导用户进行身份认证用户认证方便交互友好便捷不需要安装客户端减少客户端的配置工作量便于运营可以在页面上开展业务拓展如广告推送企业宣传等由于认证之前终端需要获取存在一定的网络安全风险对比不安全注意事项和和是协同工作的用于用户或设备的身份验证而用于综合考虑身份验证信息以及其他安全策略以确定是否允许设备访问网络资源这种联合使用可以提高网络的安全性确保只有合法和合规的设备和用户能够连接到网络边界路由协议概念试卷案例命令三根据下述规划信息表的要求在交换机上创建对应的创建名称给命名并将交换机的相应端口加入对应的端口均为类型指定接口将接口模式设置将接口加入要求与之间互联接口设置为接口且只允许相关业务通过指定接口将接口模式设置为只允许相关业务通过为全部一配置使用本的倒数第二个可用地址指定配置地址使用本的倒数第三个可用地址指定配置地址要求所有业务及管理都使用各自的最后一个可用作为本的虚拟地址指定编号配置虚拟同时要求作为销售组销售组二个业务群组主网关设备默认优先级为默认优先级为作为行政技术支持管理等业务群组的主网关设备默认优先级为默认优先级为默认优先级为注意需要开启抢占功能二配置多生成树在交换机和之间通过冗余协议来实现销售组销售组等业务优先通过转发启用生成树设置生成树模式为配置和实例绑定和实例绑定域名名称配置域名配置修订等级配置实例的优先级优先级越小的优先权越大优先级为的倍数默认万多行政技术支持管理等业务优先通过转发启用生成树设置生成树模式为配置和实例绑定和实例绑定域名名称配置域名配置修订等级配置实例的优先级优先级越小的优先权越大优先级为的倍数默认万多启用生成树设置生成树模式为配置和实例绑定和实例绑定域名名称配置域名配置修订等级四服务上设置启用服务开启登录远程登录账户仅包含密码为明文表示只允许使用登录启动本地用户名密码登录采用方式登录设备时需要输入密码密码设置为明文要求最多允许个用户同时登陆设备进入密码配置模式表示允许共个用户即用户至用户一共八位用户五端口镜像现需要把多个安全设备分别连接到设备的口通过端口镜像技术把两台核心交换机到防火墙接入交换机的所有数据流量提交给安全设备进行监控分析源被复制目的复制虚拟路由表虚拟的路由转发网络资源监视配置服务器地址配置主机配置优先级配置上行端口采样速率配置下行端口采样速率间隔为秒无线控制器与接入点胖和瘦胖除了无线路由功能以外一般具备两个接口大多支持服务器和地址克隆以及接入防火墙等安全功能瘦仅仅作为无线接入点来使用由无线控制器来进行统一的配置包括地址获取等多少个就创建多少个使用场景隧道建立的过程配置基础有线网络创建创建创建将关联个加入了一个组这个组里关联即代表这个都释放这的信号如果关联了多个则个释放多个信号将加进组里设置和对接的接口配置为本地转发模式配置为集中转发模式创建组将和进行关联虚拟路由转发',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-17 12:49:44',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">利威尔</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E7%AC%94%E8%AE%B0%E6%9C%89%E4%B8%8D%E5%AF%B9%E7%9A%84%E5%9C%B0%E6%96%B9%E5%AE%98%E8%AF%B7%E6%8C%87%E6%AD%A3%E5%9C%A8%E8%AF%84%E8%AE%BA%E5%8C%BA%E4%B8%AD/" style="font-size: 1.05rem;">自己写的笔记有不对的地方官请指正在评论区中<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">November 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E7%AC%94%E8%AE%B0%E6%9C%89%E4%B8%8D%E5%AF%B9%E7%9A%84%E5%9C%B0%E6%96%B9%E5%AE%98%E8%AF%B7%E6%8C%87%E6%AD%A3%E5%9C%A8%E8%AF%84%E8%AE%BA%E5%8C%BA%E4%B8%AD/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>自己写的笔记有不对的地方官请指正在评论区中</span></a></span></div></div><h1 class="post-title" itemprop="name headline">企业网络搭建笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-11-17T04:48:18.000Z" title="Created 2024-11-17 12:48:18">2024-11-17</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-11-17T04:49:44.677Z" title="Updated 2024-11-17 12:49:44">2024-11-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/"><header><a href="/tags/%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E7%AC%94%E8%AE%B0%E6%9C%89%E4%B8%8D%E5%AF%B9%E7%9A%84%E5%9C%B0%E6%96%B9%E5%AE%98%E8%AF%B7%E6%8C%87%E6%AD%A3%E5%9C%A8%E8%AF%84%E8%AE%BA%E5%8C%BA%E4%B8%AD/" tabindex="-1" itemprop="url">自己写的笔记有不对的地方官请指正在评论区中</a><h1 id="CrawlerTitle" itemprop="name headline">企业网络搭建笔记</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">XF</span><time itemprop="dateCreated datePublished" datetime="2024-11-17T04:48:18.000Z" title="Created 2024-11-17 12:48:18">2024-11-17</time><time itemprop="dateCreated datePublished" datetime="2024-11-17T04:49:44.677Z" title="Updated 2024-11-17 12:49:44">2024-11-17</time></header><p>[TOC]</p>
<h1 id="企业网搭建笔记"><a href="#企业网搭建笔记" class="headerlink" title="企业网搭建笔记"></a>企业网搭建笔记</h1><h2 id="单位换算"><a href="#单位换算" class="headerlink" title="单位换算:"></a>单位换算:</h2><p>字节:byte          比特:bit</p>
<p>1byte&#x3D;8bit</p>
<p>1KB&#x3D;1024Byte</p>
<p>1Kb&#x3D;1024b</p>
<p>1MBps&#x3D;1024KB</p>
<p>1Mbps&#x3D;1024Kb</p>
<p>1MB&#x3D;1048576 Byte</p>
<p>1GB &#x3D;1024MB</p>
<p>1GByte&#x3D;8Gbite</p>
<h2 id="OSI-七层模型"><a href="#OSI-七层模型" class="headerlink" title="OSI 七层模型"></a><strong>OSI</strong> 七层模型</h2><h3 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h3><ul>
<li><p>物理层 比特流传输</p>
<h3 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h3></li>
<li><p>数据链路层 控制网络层和物理层之间的通信<br>  数据链路层协议由很多种协议，解决各端链路之间的协议标准<br>  每台路由器之间的链路使用的协议都有可能不一样，比如说以太网协议（适合广播型协议），帧中继协议，ppp协议（适用于点到点），802.1x协议（适合无线网络），为了让整个网络的性能更加强大，可以在不同的链路段使用不同的协议</p>
<h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3></li>
<li><p>网络层 ip寻址和路由选择<br>  路由技术是网络工程师核心技术之一，直接影响到各个互联网app的应用体验<br>  使用的协议统一，网络层基于IP地址进行路由转发</p>
<h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3></li>
<li><p>传输层 建立，维护，管理端到端连接：<br>  两个端之间建立tcp、udp连接，对数据完整性要求高使用tcp，保障数据传输的完整性 ，但是成本比udp高，速度慢，语音视频这类实时采集的数据，没有文件完整性一说，而是采集多少就传输 多少，就用udp</p>
<h3 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h3></li>
<li><p>会话层 建立，维护，管理会话连接：<br>  两个app之间的会话，是否可以对接</p>
<h3 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h3></li>
<li><p>表示层 数据格式化，加密，解密：<br>  对app数据进行加密，就是相当于独创一套编码方式，只有自己人才知道解码方式，则可以实现数据加密<br>  我们看到的，听到的，都是用计算机的编码来表示<br>  用bmp，jpeg编码来表示图片数据<br>  用wav或mp3编码来表示声音数据<br>  用wmv或avi编码，来表示视频数据</p>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3></li>
<li><p>应用层 为应用程序提供网络服务：<br>  用户app里面的数据，图片，声音，文字</p>
</li>
</ul>
<h2 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接:"></a>远程连接:</h2><h3 id="指令"><a href="#指令" class="headerlink" title="指令:"></a>指令:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-------------------------------telnet</span><br><span class="line"></span><br><span class="line">SW1(config)#line vty 0 4     //进入telnet密码配置模式，0 4表示开启远程虚拟线路0 - 4，允许共5个用户同时登入到路由器 </span><br><span class="line">SW1(config-line)#login <span class="built_in">local</span>     //对telnet登陆设备启用基于用户名和密码的认证 </span><br><span class="line"></span><br><span class="line">SW1(config)#username admin password ruijie  //配置用户名为admin和密码为ruijie </span><br><span class="line">SW1(config)#username admin privilege 15 </span><br><span class="line">-----------设置用户特权级别，0-15; </span><br><span class="line">-----------0是最低级别，15可以执行全部指令</span><br><span class="line"></span><br><span class="line">privilege       --------权限级别</span><br><span class="line">SW1(config)#<span class="built_in">enable</span> password ruijie     ----------配置<span class="built_in">enable</span>密码为ruijie </span><br><span class="line"></span><br><span class="line">---------------------------------ssh</span><br><span class="line"></span><br><span class="line">SW1(config-line)#transport input ssh  -------只允许ssh传输到vty线程中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SW1(config)#crypto key generate rsa        -------生成rsa密钥对,用于加密和解密，会生成一个公钥一个私钥，用于加密数据和验证数字签名</span><br><span class="line"> </span><br><span class="line">   Choose the size of the key modulus <span class="keyword">in</span> the range of 360 to 2048 <span class="keyword">for</span> your Signature Keys. Choosing a key modulus greater than 512 may take a few minutes. </span><br><span class="line"> </span><br><span class="line">   How many bits <span class="keyword">in</span> the modulus [512]:  </span><br><span class="line">   ------&gt;指定加密的位数即加密强度，默认是512位(直接回车即可)</span><br><span class="line">   % Generating 512 bit RSA1 keys ...[ok]</span><br><span class="line">   % Generating 512 bit RSA keys ...[ok]</span><br><span class="line"></span><br><span class="line">--generate:生成</span><br><span class="line">--crypto：加密/解密</span><br><span class="line">--Key:密钥</span><br></pre></td></tr></table></figure>





<h2 id="IP地址划分："><a href="#IP地址划分：" class="headerlink" title="IP地址划分："></a>IP地址划分：</h2><h3 id="VLSM-Variable-Length-Subnet-Masking"><a href="#VLSM-Variable-Length-Subnet-Masking" class="headerlink" title="VLSM(Variable Length Subnet Masking):"></a>VLSM(Variable Length Subnet Masking):</h3><h4 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h4><ol>
<li><strong>确定IP地址块：</strong> 首先，确定您拥有的IP地址块，这将是您用于划分子网的起点。这个IP地址块应该是一个大的IP地址范围，例如一个Class A、Class B或Class C地址块。</li>
<li><strong>了解子网容量需求：</strong> <u>确定每个子网所需的IP地址数量</u>。不同的子网可能需要不同数量的IP地址，因此需要了解每个子网的容量需求。</li>
<li><strong>选择合适的子网掩码：</strong> 对于每个子网，<u>选择一个适合其容量需求的子网掩码</u>。子网掩码决定了子网的大小，因此较大的子网需要较长的子网掩码。</li>
<li><strong>子网划分：</strong> 使用所选择的子网掩码来划分IP地址块，将其划分为多个子网。确保每个子网具有足够的IP地址以满足其容量需求。通常，<u>子网的第一个IP地址用作子网地址</u>(<strong>网关</strong>)，最后一个IP地址用作广播地址，<strong>而中间的IP地址分配给主机。</strong></li>
<li><strong>分配子网：</strong> 将每个子网分配给特定的网络或部门，根据它们的需求和用途。为了更好地组织和管理子网，您可以使用文档或命名方案来标识每个子网。</li>
<li><strong>更新路由表：</strong> 如果您正在配置路由器以支持VLSM，确保在路由器上更新路由表以反映新的子网划分。<strong>每个子网应该有正确的路由信息</strong>，<u>以确保数据包能够正确路由到目标子网</u>。(更新子网的局域网)</li>
<li><strong>测试和验证：</strong> 在实际网络中测试和验证您的VLSM子网划分，确保每个子网按预期工作。</li>
</ol>
<p>知道了所需IP地址数量，求需要几位主机号可以用这个公式，接近IP地址数量但不小于的<strong>2的幂</strong></p>
<p>例如:vlan10 需要<strong>50</strong>个IP地址，最接近这个IP地址数量的<strong>2的幂是2^6&#x3D;64</strong>,所以主机号位数是<strong>6位</strong>,网络号是<strong>2位</strong>，每个网段有<strong>64个</strong>可用IP地址</p>
<p>A类:0<del>128    B类:129</del>191    C类:192~224      </p>
<table>
<thead>
<tr>
<th align="left">常用IP地址分类</th>
<th align="left">首位</th>
</tr>
</thead>
<tbody><tr>
<td align="left">A类</td>
<td align="left"><strong>0</strong>0000000</td>
</tr>
<tr>
<td align="left">B类</td>
<td align="left"><strong>10</strong>000000</td>
</tr>
<tr>
<td align="left">C类</td>
<td align="left"><strong>110</strong>00000</td>
</tr>
</tbody></table>
<ol>
<li><h1 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6:"></a>ipv6:</h1><p> 地址转换：</p>
<h3 id="一个16进制数由4个二进制数构成"><a href="#一个16进制数由4个二进制数构成" class="headerlink" title="一个16进制数由4个二进制数构成"></a><strong>一个16进制数由4个二进制数构成</strong></h3><p> ipv6地址由16位16进制数和冒号<em><strong>组成</strong></em>，8组，每组4位数，用“：”隔开，从0-9之后用ABCDEF表示到15，总共16位数字</p>
<p> ipv6的0可以缩写，缩头不缩尾；双冒号表示连续的0，在一组ipv6地址中只能使用一次“：：”</p>
<p> 例如：<strong>2001:8000::456:0:0:0</strong>中就是用了双冒号表示连续的0，通过推断得出，双冒号表示2组连续的0，<strong>因为总共8组16进制数</strong></p>
</li>
<li><p>概念：</p>
<h2 id="ipv6由前64位组成前缀（网络部分），后64位组成接口id"><a href="#ipv6由前64位组成前缀（网络部分），后64位组成接口id" class="headerlink" title="ipv6由前64位组成前缀（网络部分），后64位组成接口id,"></a>ipv6由前64位组成前缀（网络部分），后64位组成接口id,</h2><p> 在前缀中，<strong>前48位由网络服务提供商(ISP)划分</strong>，也就是说前48位不由老百姓划分。</p>
<p> 中间16位则是子网，例如你拿到前48的公网后，就可以用16位来划分子网，例如0000表示公司财务，0001表示摄影部…….</p>
</li>
</ol>
<h2 id="VLAN-虚拟局域网802-1Q"><a href="#VLAN-虚拟局域网802-1Q" class="headerlink" title="VLAN(虚拟局域网802.1Q):"></a>VLAN(虚拟局域网802.1Q):</h2><ul>
<li><strong>svi接口(交换机虚拟接口)：</strong>给vlan配置IP地址就变成了svi接口</li>
</ul>
<p>待解决问题：<code>桥接VLAN之间不可路由的协议</code>   <code>路由虚拟局域网之间的流量</code></p>
<h3 id="指令："><a href="#指令：" class="headerlink" title="指令："></a>指令：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vlan &lt;id&gt; </span><br><span class="line">switchport interface &lt;port/range-port&gt;     // 将端口或者某些端口划分给vlan</span><br></pre></td></tr></table></figure>





<h2 id="arp攻击："><a href="#arp攻击：" class="headerlink" title="arp攻击："></a>arp攻击：</h2><h3 id="概念：-1"><a href="#概念：-1" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>arp是一种将IP地址映射为mac地址的协议，它通过广播的方式发送给局域网内的主机，主机接受到arp请求的时候，确认是自己的IP地址就会将自己的mac地址返回</li>
</ul>
<p>​		在主机A和主机B之间，主机A发送Arp请求，主机A会现在自己的Arp高速缓存(arp cache)中查找有无对应的mac地址，如果有则在数		据帧中添加该主机的mac地址</p>
<ul>
<li>原理：　<strong>ARP攻击就是通伪造IP地址和MAC地址实现ARP欺骗，能够在网络中产生大量的ARP通信量使网络阻塞，攻击者只要持续不断的发出伪造的ARP响应包就能更改目标主机ARP缓存中的IP-MAC条目，造成网络中断或中间人攻击。</strong></li>
</ul>
<h3 id="Arp欺骗原理："><a href="#Arp欺骗原理：" class="headerlink" title="Arp欺骗原理："></a>Arp欺骗原理：</h3><ul>
<li>伪装成网关：欺骗源把自己(或者其他非网关主机)伪装成网关，向局域网内的目标主机发送ARP应答报文，使得局域网内的主机误以为欺骗源的MAC地址是网关MAC的地址，并将原本应该流向网关的数据都发送到欺骗源。将局域网内某设备的IP地址映射为非法的MAC地址，从而进行监听、截获<strong>被非法映射MAC地址</strong>的主机的报文。例如:<strong>PC4 发送 ARP 报文通告 PC2 的 IP 地址映射为自己的 MAC 地址，将导致本应该发送给 PC2 的 IP 报文全部发送到了 PC4</strong></li>
<li>攻击过程：某机器A要向主机B发送报文，会查询本地的ARP缓存表，找到B的IP地址对应的MAC地址后，就会进行数据传输。如果未找到，则A广播一个ARP请求报文（携带主机A的IP地址Ia——物理地址Pa），请求IP地址为Ib的主机B回答物理地址Pb。网上所有主机包括B都收到ARP请求，但只有主机B识别自己的IP地址，于是向A主机发回一个ARP响应报文。</li>
</ul>
<h2 id="防止arp攻击："><a href="#防止arp攻击：" class="headerlink" title="防止arp攻击："></a>防止arp攻击：</h2><p>将IP地址与每台终端设备绑定，发现arp攻击源直接将其断网</p>
<p>​	1）交换机记录每个接口对应的IP地址和MAC，生成DAI检测表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2）交换机检测每个接口发送过来的ARP回应包，根据DAI表判新是否违规，若违规则丢弃此数据包并对接口进行惩罚。</span><br></pre></td></tr></table></figure>



<h3 id="静态ARP绑定："><a href="#静态ARP绑定：" class="headerlink" title="静态ARP绑定："></a>静态ARP绑定：</h3><p>(明确指定哪个MAC地址应该与哪个IP地址关联)</p>
<ul>
<li>防御ARP攻击和ARP欺骗最直接的方式是进行IP-MAC地址绑定。用户通过在主机和网关(路由器)上实现双向IP地址和MAC地址绑定，即可提高其网络的安全性</li>
</ul>
<h4 id="指令：-1"><a href="#指令：-1" class="headerlink" title="指令："></a>指令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)#address-bind 192.168.20.1 DC2148F6DCD6  ------------静态映射mac到IP</span><br><span class="line">Ruijie#show address-bind  ------查看绑定</span><br><span class="line">Ruijie(config)#address-bind uplink fa 0/24 </span><br><span class="line">---------设置流量出口</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><p><code>注意:</code>         </p>
<p>  <strong>配置静态 ARP 绑定可以提高网络的安全性和性能，但需要谨慎管理，因为手动维护绑定可能会变得复杂，特别是在大型网络中。因此，只应在需要时使用静态 ARP 绑定，例如保护重要服务器或网络设备。</strong></p>
</li>
</ul>
<h2 id="STP生成树协议"><a href="#STP生成树协议" class="headerlink" title="STP生成树协议"></a>STP生成树协议</h2><h3 id="概念：-2"><a href="#概念：-2" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>stp是为了解决网络中的环路问题的一个协议，当网络中有多余通信路径的时候，会选择一条主要路径阻塞备用端口(BP)，因此网络拓扑类似树枝，所以叫做生成树协议</li>
</ul>
<h3 id="stp运行原理："><a href="#stp运行原理：" class="headerlink" title="stp运行原理：&#x2F;&#x2F;"></a>stp运行原理：&#x2F;&#x2F;</h3><ul>
<li><p><strong>选举</strong>根交换机：</p>
<p>  <strong>选举</strong>根交换机是通过比较网桥ID(<code>BID</code>)来<strong>选举</strong>的，网桥ID(<code>BID</code>)的组成如下：</p>
<table>
<thead>
<tr>
<th>优先级：</th>
<th>mac地址：</th>
</tr>
</thead>
<tbody><tr>
<td><code>默认为</code>32768</td>
<td>00-01-A1-98-56-45</td>
</tr>
</tbody></table>
</li>
<li><p>选举**根端口(RP)**：根端口(RP)用于接收BPDU数据帧，也用于接受普通流量,</p>
<p>  选举条件：<strong>根据端口带宽的速率的成本值，非根交换机——根交换机的成本值最低的为根端口</strong>，成本一样则比较<strong>端口ID(PID)</strong></p>
</li>
<li><p>选举<strong>指定端口</strong>：在每个网段上面选择，每个网段有且只有一个指定端口，用于转发跟交换接收BPDU数据帧，也转发普通流量</p>
<ul>
<li>选举条件：<ol>
<li><strong>根交换机的所有端口</strong>都是指定端口</li>
<li><strong>根端口的对端端口</strong>一定是指定端口</li>
<li>网段中，<strong>BPDU转发端口到根交换机路径开销最小的</strong></li>
<li>本段<strong>端口ID(PID)</strong></li>
</ol>
</li>
</ul>
</li>
<li><p>阻塞**备用端口(BP)**：</p>
</li>
</ul>
<h3 id="指令：-2"><a href="#指令：-2" class="headerlink" title="指令："></a>指令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">spanning-tree // 打开生成树(一般默认打开)</span><br><span class="line">spanning-tree priority 32668// 配置优先级  </span><br><span class="line"></span><br><span class="line">配置端口环路检测：--------------------------</span><br><span class="line"><span class="comment"># 进入接口配置模式，选择要配置的业务端口</span></span><br><span class="line">interface GigabitEthernet1/0/1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用PortFast功能，以允许快速收敛</span></span><br><span class="line">spanning-tree portfast</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用BPDU Guard功能，以检测不一致的BPDU并关闭端口，防止环路问题</span></span><br><span class="line">spanning-tree bpduguard <span class="built_in">enable</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用Loop Guard功能，以防止端口成为Root Port，即使不再接收BPDU</span></span><br><span class="line">spanning-tree loopguard default</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置Max Age参数，确保在无环路情况下每15秒发送1次BPDU，存在环路时每30秒发送1次</span></span><br><span class="line">spanning-tree maxage 15 30</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出接口配置模式</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 针对其他业务端口，重复上述步骤进行配置。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后，保存配置并退出配置模式</span></span><br><span class="line">end</span><br><span class="line">write memory</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="端口环路检测简介："><a href="#端口环路检测简介：" class="headerlink" title="端口环路检测简介："></a>端口环路检测简介：</h3><ul>
<li><strong>二层网路中的通信：</strong> 报文的转发直接通过 MAC 寻址，MAC 地址学习的正确与 否决定着用户之间是否能够正确的互通。在二层交换中，通过 MAC 地址寻址来进行报文转 发。二层设备的 MAC 地址学习都是通过源 MAC 地址学习来进行的。即：<strong>当端口收到一个未 知源 MAC 地址的报文，会将这个 MAC 添加到接收端口上</strong>，以便后续以该 MAC 地址为目的的报文能够直接转发，<strong>即一次学习多测转发。</strong> </li>
<li><strong>环路的诞生：</strong> 当新来源的mac地址发现该mac地址已经学习到了二层设备上，但源端口不一样，会修改原来mac地址的源端口，如果当</li>
</ul>
<h4 id="指令：-3"><a href="#指令：-3" class="headerlink" title="指令："></a>指令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">神州数码：(单端口检测)</span><br><span class="line">--------------------</span><br><span class="line">-----1. 配置环路检测的时间间隔</span><br><span class="line">----2. 启动端口环路检测功能</span><br><span class="line">---3. 配置端口环路控制方式</span><br><span class="line">--4. 显示和调试端口环路检测相关信息</span><br><span class="line">-5. 配置环路检测受控方式是否自动恢复</span><br><span class="line"></span><br><span class="line">-----1#loopback-detection interval-time &lt;有环路时&gt; &lt;无环路时&gt;</span><br><span class="line">----2#loopback-detection specified-vlan vlan 1   ----------回路检测只适用于vlan 1</span><br><span class="line">---3#loopback-detection control shutdown </span><br><span class="line">---3#loopback-detection control-recover <span class="built_in">timeout</span> 300 </span><br><span class="line">--5#show loopback-detection 显示端口环路检测状态和检测结果，输入参数则显示对应端口</span><br><span class="line"></span><br><span class="line">-4#debug loopback-detection   -----显示端口环路信息检测相关信息</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="RSTP生成树协议："><a href="#RSTP生成树协议：" class="headerlink" title="RSTP生成树协议："></a>RSTP生成树协议：</h2><ol>
<li><p>为什么需要RSTP(<strong>stp的缺陷</strong>)：</p>
<ul>
<li><p>STP从初始状态到完全收敛至少需经过<strong>30s</strong><br>  交换机有BP端口(<strong>阻塞</strong>)，RP端口(<strong>根端口</strong>)down掉切换成RP端口并进入转发状态至少需要经过<strong>30s</strong></p>
<p>  交换机无BP端口，RP端口down掉，其他交换机的<u>BP端口切换成DP(<strong>指定</strong>)端口并进入转发状态</u>大约费<br>  要<strong>50s;</strong>****</p>
<p>  交换机连接终端的链路进入转发雯要经过30s</p>
<p>  三种端口状态从用户使用的角度对应的行为都相同，但是呈现出不同的状态，反而增加了使用难度</p>
</li>
</ul>
</li>
<li><p>RSTP的优化：</p>
</li>
</ol>
<pre><code>- 定义了两种新角色：**备份端口(BACKUP PORT)**、和 **预备端口(Altemate Port)** 。

- 状态缩减：从5种缩减到3种 

    

    |  STP状态   |  RSTP状态  |                      解释状态对应的行为                      |
    | :--------: | :--------: | :----------------------------------------------------------: |
    |  Disabled  | Discarding | `如果不转发用户流量也不学习MAC地址，那么端口状态就是Discarding状态` |
    |  Blocking  |            |                                                              |
    | Listening  |            |                                                              |
    |  Learning  | Learnning  | `如果不转发用户流量但是学习MAC地址，那么端口状态就是Learning状态` |
    | Forwarding | Forwarding | `如果不转发用户流量但是学习MAC地址，那么端口状态就是Learning状态` |

    

    

- `**在选举的过程中加入了“发起请求-回复同意” (P/A机制)这种确认机制，由于每个步骤有确认就不需要依赖计时器来保证网络拓扑无环才去转发，只需要考虑BPDU发送报文并计算无环拓扑的时间(一般都是秒级)，其目的是使一个指定端口尽快进入Forwarding状态。**
</code></pre>
<h2 id="MSTP生成树协议："><a href="#MSTP生成树协议：" class="headerlink" title="MSTP生成树协议："></a>MSTP生成树协议：</h2><h3 id="概念：-3"><a href="#概念：-3" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>在RSTP的基础之上，如果多个主机使用一个生成树那么会导致带宽不够从而导致网络速度慢的问题，所以MSTP诞生了,MSTP具有多案例的特点，也就是说可以<strong>生成多个生成树链路</strong>，从而利用冗余链路提升网路速度和冗余性并兼顾了可靠性</li>
</ul>
<p><code>注：mstp通常和vrrp一同使用，这样可以保证可靠的情况下不会浪费多余链路的带宽，提升冗余性、可靠性、安全性</code></p>
<h3 id="指令：-4"><a href="#指令：-4" class="headerlink" title="指令："></a>指令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)# spanning-tree</span><br><span class="line">打开Spanning Tree协议,锐捷设备默认起开了STP</span><br><span class="line"></span><br><span class="line">Ruijie(config)# spanning-tree mode mstp / rstp / stp</span><br><span class="line">切换Spanning Tree模式,设备默认启用模式是 MSTP</span><br><span class="line"></span><br><span class="line">Ruijie(config)#spanning-tree mst configuration</span><br><span class="line">进入MST配置模式</span><br><span class="line"></span><br><span class="line">Ruijie(config-mst)# instance instance-id vlan vlan-range</span><br><span class="line">把VLAN组添加到一个MST instance中, instance-id范围为0～64,vlan-range范围为1~4094</span><br><span class="line"></span><br><span class="line">Ruijie(config-mst)#name name</span><br><span class="line">指定MST配置名称,该字符串最多可以有32个字节</span><br><span class="line"></span><br><span class="line">Ruijie( config-mst)#revision version</span><br><span class="line">指定MST revision number ,范围为0～65535,默认值是О</span><br><span class="line"></span><br><span class="line">Ruijie( config)# spanning-tree [mst instance-id ] priority priority</span><br><span class="line">针对不同的instance配置设备的优先级﹐优先级用于生成树计算,取值必须是4096的整数倍,最小为o,默认值为32768</span><br><span class="line"></span><br><span class="line">生成树优化</span><br><span class="line"></span><br><span class="line">Ruijie(config-if)#spanning-tree portfast</span><br><span class="line">------打开该interface的 portfast,该端口直接工作为Forwarding(转发)状态,但会因为收到BPDU而使PortFast Operational State为disabled,从而正常地参与STP算法而Forwarding,该功能一般会与bpdugard一起使用</span><br><span class="line"></span><br><span class="line">Ruijie(config)# spanning-tree portfast bpduguard default</span><br><span class="line">全局地打开BPDU guard,端口打开 BPDU Guard后,如果在该端口上收到BPDU,则会进入ErrOr-disabled状态</span><br><span class="line"></span><br><span class="line">Ruijie(config-if)#spanning-tree bpduguard <span class="built_in">enable</span></span><br><span class="line">接口开启bpduguard 功能</span><br><span class="line"></span><br><span class="line">Ruijie(config)#errdisable recovery [ interval time ]</span><br><span class="line">接口违规关闭后,指定接口自动恢复时间间隔</span><br><span class="line"></span><br><span class="line">Ruijie(config)# spanning-tree portfast bpdufilter default</span><br><span class="line">打开 BPDU filter后,相应端口会既不发,也不收 BPDU</span><br><span class="line"></span><br><span class="line">Ruijie(config-if)#spanning-tree bpdufilter <span class="built_in">enable</span> </span><br><span class="line">接口开启 BPDU filter功能</span><br></pre></td></tr></table></figure>





<h2 id="端口配置"><a href="#端口配置" class="headerlink" title="端口配置:"></a>端口配置:</h2><p>双工模式:指端口可以同时发送和接收数据，</p>
<p>半工模式:指端口只能在特定时间发送或者接收数据，通信效率比较低</p>
<p>1000Base-TX:千兆位每秒的速率，是一种网络端口的规格和标准</p>
<p>100Base-tx：百兆位每秒</p>
<p>100Base-FX:是指用光纤作为传输介质的百兆速率端口</p>
<p>full：表示全双工模式，即同时发送或接收数据</p>
<p>half：表示半双工模式，只能在某个时刻要么发送数据，要么接收数据</p>
<h3 id="速率和最大传输单元的区别"><a href="#速率和最大传输单元的区别" class="headerlink" title="速率和最大传输单元的区别"></a>速率和最大传输单元的区别</h3><ul>
<li>速率：表示网络连接的带宽，即规定时间内可以传输的数据量。例如Mbps(兆每秒)</li>
<li>最大传输单元:表示网络通信中可以传输的数据包的最大尺寸。它以字节表示。例如MTU176000byte，即171MB（兆字节）</li>
</ul>
<h2 id="端口安全："><a href="#端口安全：" class="headerlink" title="端口安全："></a>端口安全：</h2><p>作用：<code>端口安全的主要目标是确保只有经过授权的设备可以连接到交换机上的特定端口。这可以防止未经授权的设备进入网络，减少网络安全风险。</code></p>
<p><strong>在限制哪些设备可以连接到网络端口（通常是交换机端口）以及它们可以访问的资源。端口安全通常用于有线网络中，尤其是以太网网络。</strong></p>
<h2 id="端口安全概念："><a href="#端口安全概念：" class="headerlink" title="端口安全概念："></a>端口安全概念：</h2><ol>
<li><strong>MAC地址过滤</strong>：一种常见的端口安全技术是使用MAC地址过滤。每个网络设备都有一个唯一的MAC地址（物理地址），它可以用来标识设备。通过配置交换机或网络设备，管理员可以指定哪些MAC地址可以连接到特定的端口。这意味着只有已经授权的设备才能连接到网络，并且未授权的设备将被阻止。</li>
<li><strong>端口状态控制</strong>：端口安全还允许管理员控制端口的状态。这意味着管理员可以设置端口以自动关闭或锁定，如果检测到异常行为，如多次认证失败、连接多个设备或违反其他规则，那么端口将被禁用或限制。</li>
<li><strong>限制设备数量</strong>：端口安全还可以用于限制连接到特定端口的设备数量。这可以防止未经授权的设备通过交换机连接到网络，并有助于防止网络拥塞。</li>
<li><strong>提高网络安全性</strong>：通过实施端口安全策略，网络管理员可以减少未经授权的访问、减少网络攻击的风险，并提高网络的整体安全性。它有助于防止未经授权的设备进入网络，并减少了内部和外部威胁</li>
</ol>
<h3 id="指令：-5"><a href="#指令：-5" class="headerlink" title="指令："></a>指令：</h3><p>-<br>    启动端口安全：</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)#interface gigabitEthernet 0/1</span><br><span class="line"></span><br><span class="line">Ruijie(config-if-GigabitEthernet 0/1)#switchport port-security</span><br><span class="line">switch(config-if)#switchport port-security mac-address 000000000001 vlan1 </span><br><span class="line">-----------限制接口上mac地址只能访问或通信vlan1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
<ul>
<li><p>配置端口最大MAC地址数量：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config-if-GigabitEthernet 0/1)#switchport port-security maximum **N**  </span><br></pre></td></tr></table></figure>

</li>
<li><p>只允许指定IP地址的设备接入：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config-if-GigabitEthernet 0/1)#switchport port-security macaddress x.x.x.x //配置绑定的mac地址，设置后仅能让此地址的设备通过端口1</span><br></pre></td></tr></table></figure>
</li>
<li><p>违例发生后的处理:</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-------------------当安全违例事件发生时，将端口置于restrict或shutdown模式。选择restrict模式时，当非法MAC地址或太多MAC连接至该接口时，将丢弃数据包，并向网管计算机发送SNMP陷阱通知。选择shutdown模式时，发生安全错误的端口将被置于error-disable(错误禁用)状态，除非网络管理员使用no shutdown命令手工激活，否则该端口失效。</span><br><span class="line">switch(configif)#switchport port-security violation (restrict/shutdown) </span><br><span class="line"></span><br><span class="line">Switch(config-if)# switchport port-security <span class="built_in">limit</span> rate invalid-source-mac</span><br><span class="line">----------------------设置坏包速率限制</span><br><span class="line"></span><br><span class="line">Switch(config-if)# switchport port-security mac-address mac_address</span><br><span class="line">----------为该接口指定安全MAC地址。也可以使用该命令指定最大安全MAC 地址数。如果指定的MAC地址数量少于安全地址的最大数量，动态学习的MAC地址将被保留。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SWITCH(config-if)#errdisable recovery interval 180 </span><br><span class="line">---------------设置端口恢复时间</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------------------<span class="built_in">disable</span>:禁用</span><br><span class="line">------------------error:错误</span><br><span class="line">------------------violation:违例</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="SNMP-陷进通知"><a href="#SNMP-陷进通知" class="headerlink" title="SNMP(陷进通知):"></a>SNMP(陷进通知):</h2><h2 id="链路聚合："><a href="#链路聚合：" class="headerlink" title="链路聚合："></a>链路聚合：</h2><ul>
<li><p>概念：</p>
<p>  链路聚合用于将多个物理网络连接（通常是以太网接口）捆绑成一个逻辑连接，以提高网络性能、可用性、冗余性。当多个物理链路捆绑在一起的时候，它们被视为一个逻辑链路，可以增加总带宽，如果其中一个链路发生故障，流量可以自动切换到其他可用的链路</p>
</li>
<li><p>特点：</p>
<ol>
<li><strong>逻辑链路</strong>：链路聚合将多个物理链路组合成一个逻辑链路。这个逻辑链路具有一个虚拟的MAC地址和IP地址。</li>
<li><strong>带宽增加</strong>：通过捆绑多个链路，链路聚合可以增加总带宽。例如，如果你有两个1 Gbps的物理链路聚合在一起，那么逻辑链路的总带宽将为2 Gbps。</li>
<li><strong>负载均衡</strong>：链路聚合可以实现负载均衡，将数据流量均匀地分布到各个物理链路上，以充分利用带宽。</li>
<li><strong>故障容忍</strong>：如果一个物理链路发生故障，链路聚合可以自动将流量切换到其他可用链路，以保持连通性。这提高了网络的可用性。</li>
<li><strong>协议支持</strong>：链路聚合通常依赖于特定的协议，如IEEE 802.3ad（LACP）或者非标准的协议。这些协议用于管理链路聚合，并确保各个链路的一致性。</li>
<li><strong>设备依赖</strong>：链路聚合需要支持该技术的网络设备，包括交换机、路由器和服务器网卡。所有参与链路聚合的设备必须配置一致。</li>
</ol>
</li>
</ul>
<h3 id="链路聚合配置命令："><a href="#链路聚合配置命令：" class="headerlink" title="链路聚合配置命令："></a>链路聚合配置命令：</h3><ul>
<li><p>创建链路聚合组：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Port-group `编号`</span><br><span class="line">switch(config)#port-group 1   -----------创建聚合组</span><br><span class="line">switch(config-if)#port-group 1     ---------将端口加入聚合组</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
<li><p>添加成员接口：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interface x/y </span><br></pre></td></tr></table></figure>

<pre><code> 指定接口
</code></pre>
<p>  ​						 </p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">port-goup1 mode active</span><br></pre></td></tr></table></figure>
<p>  ​    将接口添加到聚合链路组</p>
</li>
</ul>
<h4 id="时钟速率"><a href="#时钟速率" class="headerlink" title="时钟速率"></a>时钟速率</h4><ul>
<li><p>概念：<strong>时钟速率定义了每秒钟发送和接收数据的位数，一遍数据能够在接收端能被正确解释</strong></p>
</li>
<li><p>指令：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clock rate  &lt;频率&gt;    </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="端口镜像-span-交换机端口分析-："><a href="#端口镜像-span-交换机端口分析-：" class="headerlink" title="端口镜像(span-交换机端口分析)："></a>端口镜像(span-交换机端口分析)：</h2><h3 id="概念：-4"><a href="#概念：-4" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>端口镜像功能是指交换机把某一个端口接收或发送的数据帧完全相同的复制给另一个 端口；其中被复制的端口称为镜像源端口，复制的端口称为镜像目的端口</li>
</ul>
<h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a><strong>特点：</strong></h3><ul>
<li><strong>目的端口只负责接收复制过来的流量而不会对流量进行转发，不管是介入流量还是转发流量都只会在目的端口进行接收。</strong>端口镜像不会改变镜像报文的任何信息，也不会影响原有报文的正常转发。同时对于源端口，目的端口的介质类型没有要求，可以是光口镜像到电口，也可以是电口的流量镜像到光口。对于源端口，目的端口的属性没有要求，可以是access口镜像到trunk口，也可以是trunk口镜像到access口。</li>
</ul>
<h3 id="指令：-6"><a href="#指令：-6" class="headerlink" title="指令："></a>指令：</h3><blockquote>
<ul>
<li><strong>注：</strong>出：tx       入：rx     双方向：both<ul>
<li>monitor:监视  	  	session</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)*#monitor session 1 <span class="built_in">source</span> interface gigabitEthernet 0/1 both*</span><br><span class="line">--------创建一个监视会话，(被复制端口)源端口为gigabitEthernet 0/1 流量为双向(接收或转发都会被复制)</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)*#monitor session 1 source interface gigabitEthernet 0/2 both*</span><br></pre></td></tr></table></figure>


</blockquote>
<blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)*#monitor session 1 destination interface gigabitEthernet 0/24 switch*</span><br><span class="line"></span><br><span class="line">-----<span class="string">&quot;switch&quot;</span>代表的是监视外部设备的流量，不加上switch只能监视本地数据的流量包(仅限于指定的destination[目标]口)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Ruijie(config-vlan)#remote-span   </span><br><span class="line">-----------在vlan上开启配置远程span功能</span><br></pre></td></tr></table></figure>

<p><strong>指定”session 1“监视会话的目标端口 Gig 0&#x2F;24 ,并将复制端口的流量发送到Gig0&#x2F;24的接口</strong> </p>
</blockquote>
<h2 id="vrrp（虚拟局域网冗余协议）："><a href="#vrrp（虚拟局域网冗余协议）：" class="headerlink" title="vrrp（虚拟局域网冗余协议）："></a>vrrp（虚拟局域网冗余协议）：</h2><h3 id="概念：-5"><a href="#概念：-5" class="headerlink" title="概念："></a><strong>概念：</strong></h3><ul>
<li>是一种网络协议，用于提高网络中的路由器的可用性和冗余性。它允许多个路由器共享一个虚拟 IP 地址（Virtual IP Address，VIP），其中一个路由器被选为主（Master），而其他路由器处于备份（Backup）状态。主路由器接收并处理流量，而备份路由器仅在主路由器失效时接管流量。</li>
</ul>
<h3 id="指令：-7"><a href="#指令：-7" class="headerlink" title="指令："></a>指令：</h3><p>- </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vrrp number ip 11.1.1.1 			// 在vrrp组中配置虚拟网关</span><br><span class="line">vrrp number priority 105				// 在vrrp组中配置优先级，默认100</span><br><span class="line">vrrp number preempt 					// 在vrrp组中开启抢占模式</span><br><span class="line">vrrp number track fastEthernet 	0/1 	// 在vrrp组中监视端口如果端口损坏或无法正常通信则降低优先级</span><br></pre></td></tr></table></figure>





<h2 id="DHCP-动态主机分配协议"><a href="#DHCP-动态主机分配协议" class="headerlink" title="DHCP(动态主机分配协议):"></a>DHCP(动态主机分配协议):</h2><h3 id="概念：-6"><a href="#概念：-6" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>DHCP是一种网络协议，通常在接入层中配置，用于自动分配<strong>IP地址和其他网络配置信息</strong>给终端设备，以便他们顺利连接到网络</li>
</ul>
<h3 id="DHCP的作用："><a href="#DHCP的作用：" class="headerlink" title="DHCP的作用："></a>DHCP的作用：</h3><ol>
<li><strong>IP地址分配：</strong> DHCP允许网络管理员为设备自动分配IP地址，而不需要手动为每个设备配置IP地址。这使得网络更容易管理，特别是在大型网络中。</li>
<li><strong>子网掩码：</strong> DHCP还可以为设备提供正确的子网掩码，以确保设备与其他设备正确通信。</li>
<li><strong>默认网关：</strong> 它还提供了默认网关的信息，允许设备访问其他网络或互联网。</li>
<li><strong>DNS服务器：</strong> DHCP可以<strong>指定DNS服务器</strong>的地址，使设备能够进行域名解析。</li>
<li><strong>其他配置选项：</strong> DHCP还可以提供其他配置信息，<strong>如NTP服务器（用于时间同步）、WINS服务器（用于Windows网络）等。</strong></li>
</ol>
<blockquote>
<p>​      <code>总结：DHCP是一种非常有用的网络协议，使网络管理更加简单和高效，同时为设备提供了必要的配      				  置信息，以使它们能够顺畅地运行在网络中。</code></p>
</blockquote>
<h3 id="DHCP通信过程："><a href="#DHCP通信过程：" class="headerlink" title="DHCP通信过程："></a><strong>DHCP通信过程：</strong></h3><p>  <code>注： (协议是双方遵守的，DHCP中，主机发起IP广播）</code>   </p>
<ol>
<li><p><strong>DHCP发现(Discover)：</strong>当设备加入网络或需要续订租约时，它会广播一个DHCP Discover消息，以寻找可用的DHCP服务器。                      &#x2F;&#x2F;<code>（主机发送的信息）</code></p>
</li>
<li><p><strong>DHCP提供(Offer)：</strong>当DHCP服务器接受到Discover消息后，会广播DHCP Offer消息，提供IP地址和其他配置信息                              &#x2F;&#x2F; （DHCP服务器或交换机发送的消息）</p>
</li>
<li><p><strong>DHCP请求（DHCP Request）：</strong> 设备在收到DHCP Offer后，<strong>选择一个DHCP服务器提供的IP地址</strong>，并向该服务器发送DHCP Request消息，请求分配该IP地址。（选择之后请求获得这个IP地址）                                   &#x2F;&#x2F;    （主机发送请求）</p>
</li>
<li><p><strong>DHCP确认（DHCP Ack）:</strong>  DHCP服务器在收到DHCP Request消息后，确认分配给主机的IP地址，并发送一个DHCP Ack消息，通知主机可以使用该IP地址。这个Ack消息也是一个广播消息，它标志着IP地址的正式分配。          &#x2F;&#x2F;（DHCP服务器确认是否可用）</p>
</li>
</ol>
<h3 id="指令：-8"><a href="#指令：-8" class="headerlink" title="指令："></a>指令：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)#service dhcp        ------&gt;该命令默认不启用，交换机必须配置</span><br><span class="line">Ruijie(config)#ip dhcp pool vlan10</span><br><span class="line">Ruijie(dhcp-config)#network 192.168.1.0 255.255.255.0   ------&gt;子网掩码要和所设置IP地址的子网掩码一致，这里都是/24位掩码</span><br><span class="line">Ruijie(dhcp-config)#dns-server 218.85.157.99                     ------&gt;设置分配给客户端的DNS地址</span><br><span class="line">Ruijie(dhcp-config)#default-router 192.168.1.254                ------&gt;设置分配给用户的网关地址，这个要和核心设备上所设置的IP地址一致，为192.168.1.254</span><br><span class="line"></span><br><span class="line">Ruijie(dhcp-config)#end</span><br><span class="line"></span><br><span class="line">SVI接口IP地址需要和default-router 地址一致，且掩码一致  (vlanIP和default-router保持一致)</span><br></pre></td></tr></table></figure>

<ul>
<li>修改祖约时间</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)#ip dhcp pool +原先的地址池名字（区分大小写）</span><br><span class="line">Ruijie（config-dhcp）lease +天 +小时 +分钟</span><br><span class="line">Ruijie（config-dhcp）lease  infinite  //设置dhcp的租约为永久</span><br></pre></td></tr></table></figure>

<ul>
<li>排除地址（excluded）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ruijie(config)#ip dhcp excluded-address 192.168.1.1 192.168.1.50 (设定排除地址为192.168.1.1--192.168.1.50这50个地址)      ---排除多个IP地址</span><br><span class="line">ruijie(config)#ip dhcp excluded-address 192.168.2.1  (设定排除地址为192.168.2.1 这个ip地址)     -----排除单个</span><br><span class="line"></span><br><span class="line">ruijie(config)#end (退出到特权模式)</span><br></pre></td></tr></table></figure>

<ul>
<li>给某个IP地址分配特定IP地址</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="DHCP-中继代理-DHCP-Relay-："><a href="#DHCP-中继代理-DHCP-Relay-：" class="headerlink" title="DHCP 中继代理(DHCP Relay)："></a>DHCP 中继代理(DHCP Relay)：</h2><h3 id="概念：-7"><a href="#概念：-7" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>DHCP中继（DHCP Relay）通常在<strong>分布层</strong>或<strong>核心层</strong>层次中实施，DHCP中继的作用是<strong>将来自不同子网或不同网络的DHCP请求</strong>传递到具有<strong>DHCP服务器的子网</strong>，以便在<strong>多子网</strong>或<strong>多网络</strong>环境中<strong>分配IP地址和配置信息</strong>。</li>
</ul>
<p><code>注：vlan中svi口是指vlan配置了IP地址后的虚拟接口，也就是说vlan配置了IP地址就成了svi接口（虚拟接口）</code></p>
<p><strong>配置思路：配置全网互通，接入层交换机中配置vlan并且划分接口到vlan，每一个vlan配置DHCP中继，DHCP服务器配置地址池和网关等信息</strong></p>
<h3 id="指令：-9"><a href="#指令：-9" class="headerlink" title="指令："></a>指令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Ruijie(config)#service dhcp        ------&gt;该命令默认不启用，交换机必须配置</span><br><span class="line">Ruijie(config)#ip helper-address 172.16.1.1   ------&gt;该地址需要是DHCP服务器地址，并且路由可达</span><br></pre></td></tr></table></figure>













<h2 id="DHCP-snooping-DHCP监听-："><a href="#DHCP-snooping-DHCP监听-：" class="headerlink" title="DHCP snooping (DHCP监听)："></a>DHCP snooping (DHCP监听)：</h2><h3 id="概念：-8"><a href="#概念：-8" class="headerlink" title="概念："></a>概念：</h3><ul>
<li><p>DHCP snooping(DHCP监听)是一种网络安全功能，保护局域网中的设备免受恶意DHCP服务器的攻击和不良DHCP消息。</p>
<p>  <strong>DHCP监听使用可信和不可信接口的概念。通过DHCP流量的路径，交换机验证接口上收到的DHCP数据包，并在受信任接口上跟踪预期的DHCP服务器数据包（OFFER和ACK）。换句话说</strong>，<u>不受信任的接口会阻止DHCP服务器数据包。</u></p>
</li>
</ul>
<h3 id="指令：-10"><a href="#指令：-10" class="headerlink" title="指令："></a>指令：</h3><ul>
<li><pre><code>  IP DHCP Snooping    // 启动DHCP侦听
  IP DHCP snooping vlan 20  // 指定要实现侦听的vlan
  intnerface gigabitEthernet 1/1    // 设置DHCP侦听端口
  IP DHCP snooping trust   // 配置端口信任，G1/1 为信任端口
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 三层网络设计模型（接入、分布、核心）：</span><br><span class="line"></span><br><span class="line">1. **接入层（Access Layer）：**</span><br><span class="line">    - 接入层位于网络层次结构的最底层，最靠近终端用户或设备。</span><br><span class="line">    - 特点：接入层主要负责连接终端设备（如计算机、IP电话、打印机等）到网络，并提供对网络资源的访问。它通常涵盖了局域网（LAN）的范围，因此需要处理用户设备的接入和流量分发。</span><br><span class="line">    - 功能：在接入层，通常会使用交换机等设备来管理用户的网络连接，执行VLAN划分、安全策略和QoS（服务质量）控制等功能。</span><br><span class="line">2. **层（Distribution Layer）：**</span><br><span class="line">    - 分布层位于核心层和接入层之间，起到连接和分发流量的作用。</span><br><span class="line">    - 特点：分布层的主要任务是连接多个接入层，并提供路由、策略控制和安全性等功能。它通常用于将流量从接入层传送到核心层，并在不同子网之间执行路由。</span><br><span class="line">    - 功能：在分布层，常见的功能包括**VLAN**的汇总、**路由**、**访问控制列表（ACL）**的实施、**负载均衡和故障隔离。**</span><br><span class="line">3. **核心层（Core Layer）：**</span><br><span class="line">    - 核心层位于网络层次结构的顶层，是网络的主干部分，连接不同的分布层。</span><br><span class="line">    - 特点：核心层的主要功能是提供高带宽、高可用性的网络互连，以实现快速数据传输。它通常用于在不同分布层之间传递大量的数据流量。</span><br><span class="line">    - 功能：在核心层，重要的功能包括高速交换、负载均衡、冗余路径和故障恢复，以确保网络的高可用性和性能。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">`注：NAT是将源IP地址转换成目标IP地址，DHCP是将池里的IP地址分配给下层的主机，DHCP是主机自动请求分配IP地址，而NAT是接入层设备强制进行数据包NAT转换的`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Nat（网络地址转换协议）：</span><br><span class="line"></span><br><span class="line">- **概念：**用于将一个内部私有IP地址映射到一个固定的外部公共IP地址，而且这个映射是静态不变的，不会随着连接或会话的建立而改变。</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">- **静态NAT与动态NAT的区别：**静态NAT与动态NAT不同。在动态NAT中，内部私有IP地址动态地映射到一个公共IP地址，通常是从一个IP地址池中分配的。而在静态NAT中，映射关系是明确指定的，一对一的，不会随机变化。</span><br><span class="line"></span><br><span class="line">    - **指令：**动态/静态</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      **动态NAT**
      IP NAT pool pool-name 11.1.1.0-11.1.1.20 netmask 255.255.255.0  		//创建NAT地址池
      acc number premit/deny 192.168.20.0 0.0.0.255 		     // 创建控制列表(permit允许,deny拒绝)
      int fa 0/1 
      ip nat inside/outside 				// 定义接口为内网/外网
      
      ip nat inside source list number pool pool-name    // list过滤出来的地址进行pool-name内的地址转换
      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">        </span><br></pre></td></tr></table></figure>
      **静态NAT**
      IP nat inside/outside 			// 定义接口为内网或外网
      IP nat inside source static 192.168.20.1 11.1.1.1   		// 将内网地址转换为固定的公网地址
      配置静态NAT的时候可以起到将某服务器隐藏在内部网络中的作用，并且可以指定访问端口
      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">        </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## NAT负载均衡：</span><br><span class="line"></span><br><span class="line">### 概念:</span><br><span class="line"></span><br><span class="line">- **将多个后端服务器的IP地址映射为统一的外网地址，客户端访问时，对每次连接请求动态的转换为一个内部服务器地址**，可以将外网的流量分给内部每台服务器，从而实现负载均衡</span><br><span class="line"></span><br><span class="line">### 负载均衡策略：</span><br><span class="line"></span><br><span class="line">1. 轮询(rotary):     IP 地址将会在池中循环使用。</span><br><span class="line">2. 权重分配:</span><br><span class="line">3. 性能评估:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## NAPT(端口地址转换):</span><br><span class="line"></span><br><span class="line">**地址＋端口”的映射方式**，因此 可以使内部局域网的许多主机共享一个IP地址访问Internet；**PAT不光转换IP地址还会修改端口号**，**这可以让同一个IP地址为多个设备转换**</span><br><span class="line"></span><br><span class="line">### 指令：</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">    ip nat pool zlf 200.1.1.1 200.1.1.1 netmask 255.255.255.0   //创建地址池</span><br><span class="line">    ip nat inside source list 1 pool zlf overload  		// 将访问列表过滤的报文进行地址池内NAPT转换</span><br><span class="line">    ip nat inside source list number interface fastEthernet（接口） overload // 将过滤的包进行接口上的IP地址转换</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由:"></a>静态路由:</h2><h3 id="概念：-9"><a href="#概念：-9" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>网络管理员<strong>手动配置的路由表</strong>叫做静态路由，配置包含目标IP地址，子网掩码，下一跳</li>
</ul>
<h3 id="指令：-11"><a href="#指令：-11" class="headerlink" title="指令："></a>指令：</h3><ul>
<li><pre><code>  ip route &lt;ip&gt;  &lt;netmask&gt;  &lt;下一跳&gt;  
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 浮动静态路由指令：</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">    ip route &lt;ip&gt;  &lt;netmask&gt;  &lt;下一跳&gt;</span><br><span class="line">    ip route &lt;ip&gt;  &lt;netmask&gt;  &lt;不同的下一跳&gt;     </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="Rip动态路由协议-十年前就被淘汰"><a href="#Rip动态路由协议-十年前就被淘汰" class="headerlink" title="Rip动态路由协议(十年前就被淘汰):"></a>Rip动态路由协议(十年前就被淘汰):</h2><ol>
<li><code>注：rip允许一条路径最多只能包含15个路由器，‘距离’等与16是相当于不可达，</code><strong>因此rip只适用于小型互联网</strong></li>
<li><code>rip仅和相邻路由器交换信息(路由表)并且是周期性交换(例如每30s交换一次)</code></li>
</ol>
<h3 id="指令：-12"><a href="#指令：-12" class="headerlink" title="指令："></a>指令：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router rip 					// 开启rip动态路由</span><br><span class="line">version 2					// 版本模式为2</span><br><span class="line">net 192.168.1.0 			// 配置网段，每个接口的网段都需要配置</span><br></pre></td></tr></table></figure>

<ul>
<li>路由器刚开始时，只知道自己的直连网络距离为1</li>
</ul>
<table>
<thead>
<tr>
<th>目的网络</th>
<th>距离</th>
<th>下一条</th>
</tr>
</thead>
<tbody><tr>
<td>n1</td>
<td>1</td>
<td>直连</td>
</tr>
<tr>
<td>n4</td>
<td>1</td>
<td>直连</td>
</tr>
</tbody></table>
<p><strong>科普网络中‘收敛’：</strong> 当某个网络事件引起路由可用或不可用时，路由器就发出更新信息。 路由更新信息遍及整个网络，引发重新计算最佳路径，最终达到所有路由器一致公认的最佳路径。 <strong>这个过程即称为收敛</strong></p>
<h3 id="RIP的路由条目更新规则："><a href="#RIP的路由条目更新规则：" class="headerlink" title="RIP的路由条目更新规则："></a>RIP的路由条目更新规则：</h3><ul>
<li><pre><code>  C和D是相邻路由器，每隔一个周期发送一次自己的路由表，路由器C将自己路由表中的信息封装到RIP更新报文中，发送给相邻路由器，路由器收到报文后对自己路由表进行更新改造
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20230918190118604](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20230918190118604.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### RIPng:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## OSPF(开放式最短路径优先协议)：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 概念：()</span><br><span class="line"></span><br><span class="line">- 链路状态路由选择协议又被称为最短路径优先协议，它基SPF（shortest path first ）算法。他比距离矢量协议复杂的多。路由器的链路状态的信息称为链路状态，包括：接口的IP地址和子网掩码，网络类型，（如以太网链路或串行点对点链路），该链路的开销，该链路上的所有的相邻路由器。</span><br><span class="line"></span><br><span class="line">### 特点：</span><br><span class="line"></span><br><span class="line">- 链路状态路由协议是层次式的，网络中的路由器并不向邻居传递“路由项”，而是通告给邻居一些链路状态。链路状态协议只是通告给邻居的一些链路状态。运行该路由协议的路由器不是简单地从相邻的路由器学习路由，而是把路由器分成区域，收集区域的所有的路由器的链路状态信息，根据状态信息生产网络拓扑结构，每一个路由器再根据拓扑结构计算出路由</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 指令：</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">    RA(config)#router ospf 10       // 创建ospf 进程</span><br><span class="line">    RA(config-router)#network  172.16.1.0 0.0.0.3  area 0    // 通告直连网段</span><br><span class="line">    RA(config-router)#network  172.16.1.4 0.0.0.3  area 10   //  通告另一个子网段</span><br><span class="line">    RA(config-router)#default-information originate       // 分发默认路由信息</span><br><span class="line">    RA(config-router)#redistribute ospf 1 subnets        // 重分发路由协议1包括子网信息</span><br><span class="line">    RA(config-router)#redistribute ospf 2 metric 2     // 重分发ospf2的路由信息度量值2</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SW1(config-router)<span class="comment">#passive-interface vlan 10            //  vlan10 禁止发送hello报文</span></span><br></pre></td></tr></table></figure>





<h2 id="PBR-策略路由"><a href="#PBR-策略路由" class="headerlink" title="PBR(策略路由):"></a>PBR(策略路由):</h2><ul>
<li><h4 id="与普通路由的区别：普通路由是根据目标地址来选择路径-策略路由是根据源地址来选择路径"><a href="#与普通路由的区别：普通路由是根据目标地址来选择路径-策略路由是根据源地址来选择路径" class="headerlink" title="与普通路由的区别：普通路由是根据目标地址来选择路径,策略路由是根据源地址来选择路径"></a><code>与普通路由的区别：普通路由是根据目标地址来选择路径,策略路由是根据源地址来选择路径</code></h4><p>  与QOS的区别:</p>
</li>
<li><p><strong>QOS(服务质量区分)</strong>,是用于控制不同类型的流量的带宽速率<strong>保证业务有差别的服务</strong>，在带宽有限的时候就需要用到QOS</p>
</li>
<li><p><strong>PBR</strong>是用于<strong>控制某种类型的数据包</strong> 的选路策略，<code>比如希望张三访问外网走线路1，其他人走线路2</code></p>
</li>
</ul>
<h3 id="概念：-10"><a href="#概念：-10" class="headerlink" title="概念："></a>概念：</h3><ul>
<li><strong>是针对某种数据包，直接制定的选路策略。</strong>    都是选路那么跟普通路由有什么区别呢?</li>
<li><strong>举个例子来看</strong> </li>
<li><strong>现在希望张三访问外网走线路1，其他人访问外网走线路2。 如果在路由器上，用常规路由如何实现？</strong> </li>
<li><strong>是不是发现常规路由无法完成，因为常规路由都是按目标地址来选路，而这里的需求，是按源地址选路</strong> </li>
<li><strong>只要源地址为张三的数据包，就走线路1，不管目标是什么</strong>。</li>
</ul>
<p>​       <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img-blog.csdnimg.cn/b300b40a60fd468d87977dd585b8939d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA572R5bel5a2m5aeQ,size_19,color_FFFFFF,t_70,g_se,x_16" alt="img"> </p>
<p><code>策略路由的做法是，首先用ACL来定义一种特别的数据包（比如源地址为张三的包），然后再针对这个ACL定义的包，配置一个选路策略（走线路1）</code></p>
<h3 id="应用场景："><a href="#应用场景：" class="headerlink" title="应用场景："></a>应用场景：</h3><ol>
<li><p><strong>多出口网络中，同时有电信和联通的线路，</strong>但是服务器<strong>对外映射的是电信的公网IP</strong>，那就必须强制服务器从<strong>电信线路</strong>走。         这时就需要用策略路由，来针对源地址为服务器的数据包，做强制走电信线路的规则。</p>
</li>
<li><p>再比如，某些网络安全项目上，要求某些<strong>关键数据包，必须经过安全设备</strong>的过滤，如下图。</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img-blog.csdnimg.cn/cfa1d528e344407e8838927c0a1de1e2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA572R5bel5a2m5aeQ,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p> 现在希望<strong>税务局</strong>访问<strong>政务服务器</strong>的数据包，必须经过<strong>安全设备</strong>。</p>
<p> 就需要在<strong>核心设备</strong>上，<strong>针对税务局的包做策略路由</strong>，因为选路策略要考虑源地址。</p>
</li>
</ol>
<h3 id="配置："><a href="#配置：" class="headerlink" title="配置："></a>配置：</h3><ol>
<li><pre><code class="bash"> router-map ruijie  permit  10            // 创建策略路由序号为10
 f
 match IP address 100 					// 指定这个策略匹配ACL100,也就是处理list10的包
 
 set ip next-hop 192.168.1.2 			// 指定下一跳，即流量即将被路由的地址，也可以设置数据包的出口，建议设置为下一条IP
 
 Router(config-if)#ip policy 10         // 接口应用策略路由
 
 show router-map       // 查看路由映射
 show access-list     // 查看ACL列表
 show ip policy      // 
 
 Router(config)#
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">    注意：</span><br><span class="line">    </span><br><span class="line">    1）route-map的**匹配顺序为从上往下匹配**，当流量匹配到策略后，就按匹配的策略转发数据，**不会继续往下匹配。**</span><br><span class="line">    </span><br><span class="line">    2）route-map **最后有有一条deny所有的语句**，对于**没有匹配到策略路由的流量，不会把内网的流量丢弃，**而是做**正常的ip 路由转发。**</span><br><span class="line">    </span><br><span class="line">    3）set ip next-hop 可以设置下一跳ip地址，也可以设置数据包的出接口，建议设置为下一跳的ip地址。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 缺省路由(默认路由)</span><br><span class="line"></span><br><span class="line">- ### 概念它的网络地址和子网掩码全是0，匹配任意网络前缀。</span><br><span class="line"></span><br><span class="line">- ### 它是比较特殊的静态路由</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## acl(access control list )：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### Acl规则：</span><br><span class="line"></span><br><span class="line">- 每个ACL可以包含多个规则，每个规则根据自上而下的顺序过滤</span><br><span class="line"></span><br><span class="line">#### 特点：</span><br><span class="line"></span><br><span class="line">- 读取三层、四层头部信息，根据预先定义好的规则对流量进行筛选和过滤。</span><br><span class="line">- **三层头部信息**：源、目IP</span><br><span class="line">- **四层头部信息**：TCP/UDP协议 、 源、目端口号</span><br><span class="line">- 注意： **一般情况下，标准或扩展ACL一旦编写号，无法修改某一条，也无法删除某一条，也 无法修改顺序，也无法往中间插入新的条目，只能一直在最后添加新的条目。 如想修 改或插入或删除，只能删除整张表，重新写！**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 标准acl：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### **概念**：</span><br><span class="line"></span><br><span class="line">- 访问控制列表 (ACL)是一种基于包**(数据包)**过滤的 访问控制技术 ，**它可以根据设定的条件对接口上的数据包进行过滤，允许其通过或丢弃。**. 访问控制列表被广泛地应用于 路由器 和 三层交换机 ，&lt;u&gt;借助于访问控制列表，可以有效地控制用户对网络的访问，从而最大程度地保障 网络安全&lt;/u&gt; 。. 中文名. 访问控制列表. 外文名. Access Control Lists.</span><br><span class="line"></span><br><span class="line">`华为设备中过滤的先后顺序是规则的编号规定的，编号越小过滤规则越优先，在Cisco或者锐捷设备中呢是根据配置规则的先后顺序进行一个过滤，在过滤执行中如果匹配到了某一条规则则会跳过匹配循环，permit或deny(允许/拒绝)`</span><br><span class="line"></span><br><span class="line">#### 特点：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- #### 特点：</span><br><span class="line"></span><br><span class="line">    表号：1-99</span><br><span class="line"></span><br><span class="line">    可以基于源地址进行访问控制</span><br><span class="line"></span><br><span class="line">    只能基于源地址的访问控制，不能对一些特定的服务或者端口进行访问控制</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 指令：</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">    access-list 1 permit 192.168.1.0 0.0.0.255  			</span><br><span class="line">    // 过滤此网段允许</span><br><span class="line">    </span><br><span class="line">    access-list 1 permit host 192.168.1.2 host 192.168.2.1    </span><br><span class="line">    // 过滤源IP-目标IP的数据包</span><br><span class="line">    </span><br><span class="line">    access-list 1 permit 192.168.1.0 192.168.1.255           </span><br><span class="line">    // 过滤1.0~1.255IP的数据包</span><br><span class="line">    </span><br><span class="line">    ROUter1(config-if)#access-group &lt;id&gt;  in/out    	       </span><br><span class="line">    // 对进或出接口的数据包进行过滤,过滤规则为list &lt;id&gt;</span><br><span class="line">    </span><br><span class="line">    no access-list &lt;id&gt;    </span><br><span class="line">    // 删除ACL</span><br><span class="line">    </span><br><span class="line">    IP access-list standard &lt;id&gt;   </span><br><span class="line">    // 创建标准ACL</span><br><span class="line">    </span><br><span class="line">    IP access-list extended &lt;id&gt;    </span><br><span class="line">    // 创建扩展ACL，补充：扩展ACL五元组包括：源IP/目标IP 源端口/目标端口  协议号(协议如TCP/UDP等) </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
<h2 id="acl-扩展extended-："><a href="#acl-扩展extended-：" class="headerlink" title="acl(扩展extended)："></a>acl(扩展extended)：</h2><h3 id="五元组："><a href="#五元组：" class="headerlink" title="五元组："></a>五元组：</h3><p>  <strong>源IP  目标IP  源端口号 目标端口号 协议号</strong></p>
<h4 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h4><ul>
<li><p>表号：100-199 </p>
</li>
<li><p>特点：可以基于源IP、目标IP、端口号、协议等对包进行过滤 </p>
<p>  <code>注：80端口表示web服务器端口</code></p>
</li>
</ul>
<h4 id="指令：-13"><a href="#指令：-13" class="headerlink" title="指令："></a>指令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Router(config)#access-list (100-199) permit tcp host 192.168.1.1 host 192.168.4.1 eq 80      </span><br><span class="line">-----------允许源地址IP1.1以 tcp协议和目标IP4.1在80端口访问</span><br><span class="line"></span><br><span class="line">Ruijie(config)#ip access-list extended list_name        </span><br><span class="line">-------------------创建扩展控制列表</span><br><span class="line"></span><br><span class="line">Ruijie(config)#ip access-list standard list_name        </span><br><span class="line">-------------------创建标准acl</span><br></pre></td></tr></table></figure>



<h3 id="alc工作原理"><a href="#alc工作原理" class="headerlink" title="alc工作原理"></a>alc工作原理</h3><ul>
<li><p>ACL使用网络流量控制（<strong>过滤</strong>）技术，在路由器上读取网络层和传输层的报头信息。（源IP  目标IP 源端口  目标端口），通过执行ACL定义的访问规则，进行数据流量控制和过滤， 达到网络访问控制的目的。</p>
<p>  访问控制列表在接口应用的方向:</p>
<pre><code> `出：以经过路由器的处理，正离开路由器接口的数据包`

 `入：已到达路由器接口的数据包，将被路由器处理`
</code></pre>
<p>  <strong>注意：</strong></p>
<ul>
<li><p>ACL表必须应用到接口的进或出方向才生效！</p>
</li>
<li><p>一个接口的一个方向只能应用一张表！</p>
</li>
<li><p>进还是出方向应用？取决于流量控制总方向 </p>
</li>
<li><p>ACL表是严格自上而下检查每一条，所以要注意书写顺序 </p>
</li>
<li><p>每一条是由条件和动作组成，当流量完全满足条件当某流量没有满足某条件，则 继续检查下一条 </p>
</li>
<li><p>标准ACL尽量写在靠近目标的地方</p>
</li>
</ul>
</li>
</ul>
<h3 id="应用场景：-1"><a href="#应用场景：-1" class="headerlink" title="应用场景："></a>应用场景：</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20230921173934597.png" alt="image-20230921173934597" style="zoom: 67%;" />





<h3 id="指令：-14"><a href="#指令：-14" class="headerlink" title="指令："></a>指令：</h3><ul>
<li><pre><code class="bash">  access-list &lt;id&gt;  premit/deny  &lt;源IP地址&gt;  &lt;通配符反掩码&gt;    // permit(允许) deny(拒绝)
  后面可加any来表示拒绝或允许除了规则以外的全部流量
  
  Router#show ip access-lists              
  -------------------查看控制列表
  
  Router(config-if)# ip access-group list_name in     //  将ACL应用到接口					
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">    **`注释:  反子网掩码**：将正子网掩码0和1倒置`**</span><br><span class="line">                  **`255.0.0.0  --  0.255.255.255`**</span><br><span class="line">                  **`255.255.0.0  --  0.0.255.255`**</span><br><span class="line">                  **`255.255.255.0  --  0.0.0.255`**</span><br><span class="line">                 **`反子网掩码作用：用来匹配条件，与0对应的需要严格匹配，与1对应的忽略！`****</span><br><span class="line"></span><br><span class="line">* 标准和扩展的区别：</span><br><span class="line"></span><br><span class="line">    **标准ACL只检查 数据包 的源地址; 扩展ACL既检查&lt;u&gt;数据包&lt;/u&gt;的源地址，&lt;u&gt;也检查数据包的目的地址&lt;/u&gt;，同时还可以检查数据包的&lt;u&gt;特定协议类型、 端口号 等&lt;/u&gt;**</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 通配符和反掩码的关系:</span><br><span class="line"></span><br><span class="line">`注:`，遇到0，精确匹配(不能够改变)        遇到1可以任意变，**所以ACL过滤时使用了通配符那么就需要根据通配符来进行过滤**</span><br><span class="line"></span><br><span class="line">在ACL中，严格意义上来说IP地址后的反掩码不算作反掩码，因为反掩码的所有字节要么1要么0，主要作用标识网络号和主机号，通配符是用来匹配bits位能不能进行改变，如果是0则精确匹配(固定数)，1则任意匹配(任意数)</span><br><span class="line"></span><br><span class="line">#### 例一：</span><br><span class="line"></span><br><span class="line">其中反码是**0.0.255.255，前面两位是0，**所以前面两位都不能改变，后面两个都是255,代表的是1，所以符合条件的是**192.168.0.0~192.168.255.255**，符合规定的路由如第三张图，只有这**三个路由被**过滤出来</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ![image-20230927144201370](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20230927144201370.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 例二：</span><br><span class="line"></span><br><span class="line">其中通配符全部都是0，代表都不能有变化，所以符合条件的只有**192.168.0.0**这一条被过滤出来了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ![image-20230927144127045](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20230927144127045.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 例三：</span><br><span class="line"></span><br><span class="line">精确到bits位来进行匹配，	奇数或偶数匹配，在ACL过滤的时候,会遇到不是全1的反掩码，例如0.0.254.255，其中第三个字节是254，转换成二进制为：0.0.00000001.11111111，其中0代表精确匹配，则前面七位都是不能改变的，由于前面七位都是2的幂且不为2^1(第8位已经是2 ^1),所以前面八位不管怎么变都是偶数，偶数+1就是奇数，所以过滤的时候就是的**一二字节不变**、**第三字节为奇数**、**第四字节任意** 的这么一个数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ![image-20230927151250109](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20230927151250109.png)</span><br><span class="line"></span><br><span class="line">如果相匹配偶数，**则把2^1的那位改成0**，并**且与之对应的反掩码将第8位写成0**，这样奇数就不存在了，就能够过滤偶数，192.168.0000000 0.0    0.0.254.255,这样就能匹配到偶数的IP地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## ACL(命名)：</span><br><span class="line"></span><br><span class="line">- 作用：可以对标准或者扩展ACL进行自定义命名</span><br><span class="line">- 优点：自自定义命名更容易辨认，也便于记忆！ **可以任意修改某一条，或删除某一条，也可以往中间插入某一条**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>ip  access-list  standard&#x2F;extended   自定义表名   	 &#x2F;&#x2F; 自定义标准或扩展名只需要在最后写上表名  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 多路由协议混用：</span><br><span class="line"></span><br><span class="line">### 作用：</span><br><span class="line"></span><br><span class="line">1. 提升冗余性和可靠性，不同的协议可以根据不同的度量值来选择最佳路径，如果其中一个协议出现故障另一种协议还可以继续提供服务</span><br><span class="line"></span><br><span class="line">### 概念：</span><br><span class="line"></span><br><span class="line">#### 路由协议地图：</span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line">#### 路由重分发：</span><br><span class="line"></span><br><span class="line">- **使用路由重分发特性以交换不同协议创建的路由信息**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 指令：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>redistribute &lt;&gt; <id> metric &lt;度量值&gt; metric-type [metric-type-value] subnets</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## PPP：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### PAP认证(密码认证协议)：</span><br><span class="line"></span><br><span class="line">- **被认证方以明文的形式发送用户和密码，认证方在数据库中检查被认证方的用户和密码是否正确**，这样的认证方式是不安全的。</span><br><span class="line"></span><br><span class="line">    特点：**被认证方向认证方发送**</span><br><span class="line"></span><br><span class="line">#### 指令:</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">    R1(config-if)#encapsulation ppp   // 开启ppp认证</span><br><span class="line">    R1(config-if)#ppp authentication  PAP // 切换为PAP模式认证</span><br><span class="line">    R1(config-if)#ppp pap username &lt;p1&gt;  password &lt;123&gt;    // 配置认证端账户密码,只有账户密码符合的才能通过认证</span><br><span class="line">    R1(config-if)#username ccie password 123</span><br><span class="line">    </span><br><span class="line">    R2(config-if)#encapsulation ppp      </span><br><span class="line">    R2(config-if)#usesrname &lt;p1&gt;  password &lt;123&gt;    //   开启ppp模式后直接配置用户密码是储存在口令数据库里的</span><br><span class="line">    R2(config-if)#ppp </span><br></pre></td></tr></table></figure>

<h3 id="chap认证-挑战握手协议-："><a href="#chap认证-挑战握手协议-：" class="headerlink" title="chap认证(挑战握手协议)："></a>chap认证(挑战握手协议)：</h3><ol>
<li><p>认证方发送挑战报文Challenge，包含{用户名&#x3D;空、id&#x3D;1(第1次为1最高为3)、随机数}，被人正方将自己的用户名与id、随机数、密码计算为hash值，发送用户名和hash给认证方，认证方在检索用户名之后再将用户名、密码、id、随机数计算成hash值，再与被人正方发送的Respones报文进行比较，返回 成功&#x2F;失败  Sucess&#x2F;Failure     	 <strong>白话：被认证方将本地用户名和发起挑战方发送的challenge报文进行hash计算，将自己的用户名和挑战值(hash)值发送给认证方，认证方在自己的用户库里找到相同的用户名进行hash计算，与被认证方的挑战值进行对比过后决定是否建立连接，即hash值匹配则建立连接，不匹配则发送failure报文，表示”认证失败”</strong></p>
</li>
<li><p>其中没有明文传输密码，而是以hash值作为代替,所以是很安全的</p>
<p> 特点：<strong>认证端向被认证端发送</strong></p>
</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20230924184931741.png" alt="image-20230924184931741" style="zoom: 50%;" />

<h4 id="指令：-15"><a href="#指令：-15" class="headerlink" title="指令："></a>指令：</h4><ul>
<li><pre><code class="bash">  Router(config-if)#encapsulation ppp          // 将接口封装为ppp协议
  Router(config-if)#	ppp authentication chap   // 启用chap认证(建立本地CHAP口令数据库) 
  ip address A.B.C.D &lt;netmask&gt;   // 设置IP地址
  clock rate &lt;number &gt;      // 设置时钟频率
  ppp chap hostname &lt;被认证账户名&gt;      // 设置认证用户名
  ppp chap paword &lt;被认证密码&gt;          // 设置认证密码
  username  &lt;name&gt;  password &lt;password&gt;    // 设置账户密码(客户端)
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">配置思路:</span><br><span class="line"></span><br><span class="line">1. 单项认证：</span><br><span class="line"></span><br><span class="line">    确定好客户端和服务端，**在服务端接口上开启ppp认证模式，模式切换为chap**(客户端不用开启CHAP)，设置时钟频率，退出接口，设置用户名密码，服务端开启ppp认证，设置始终频率(**选择**)，设置chap认证用户和密码</span><br><span class="line"></span><br><span class="line">2. 双向认证:</span><br><span class="line"></span><br><span class="line">    双方都设置ppp认证和CHAP协议，设置串口、时钟频率、设置账号密码，互相设置认证账号和认证密码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 在CHAP认证过程中，挑战是由服务器端（在这个场景中是路由器）发起的。</span><br><span class="line"></span><br><span class="line">**服务器端（路由器）配置**：</span><br><span class="line"></span><br><span class="line">1. 首先，我们需要在路由器上创建一个用户名和密码，这将用于客户端的CHAP认证。</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">Router(config)#username HOST1 password cisco</span><br><span class="line">Router(config)#username HOST2 password cisco</span><br></pre></td></tr></table></figure>

 2 . 然后，我们需要在路由器的接口上启用PPP封装和CHAP认证。
</code></pre>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Router(config)#interface Serial 0/0/0</span><br><span class="line">Router(config-if)#encapsulation ppp</span><br><span class="line">Router(config-if)#ppp authentication chap</span><br></pre></td></tr></table></figure>

<p><strong>客户端（主机）配置</strong>：</p>
<ol>
<li>在每个主机上，我们也需要创建一个用户名和密码。这里的用户名应该与路由器上的用户名相同，密码也应该相同。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Host(config)#username ROUTER password cisco</span><br></pre></td></tr></table></figure>

<p>   2.然后，我们需要在主机的接口上启用PPP封装和CHAP认证。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host(config)#interface Serial 0/0/0</span><br><span class="line">Host(config-if)#encapsulation ppp</span><br><span class="line">Host(config-if)#ppp authentication chap</span><br></pre></td></tr></table></figure>

<p>当主机试图通过路由器访问网络时，路由器会发起CHAP挑战。主机会使用它知道的路由器的用户名和密码来响应挑战。如果响应正确，路由器就会允许主机访问网络。</p>
<p>以上就是在Cisco设备上配置CHAP认证的过程和命令。请注意，这只是一个基本的示例，实际的网络环境可能需要更复杂的配置。此外，出于安全考虑，建议使用更强的密码，并定期更改。如果你有任何问题，请随时向我提问。</p>
<h2 id="QOS-服务质量，流量带宽控制"><a href="#QOS-服务质量，流量带宽控制" class="headerlink" title="QOS(服务质量，流量带宽控制):"></a>QOS(服务质量，流量带宽控制):</h2><h3 id="概念：-11"><a href="#概念：-11" class="headerlink" title="概念："></a>概念：</h3><ul>
<li><p>QoS（Quality of Service）是服务质量的简称。<strong>为用户提供有差别的网络服务</strong></p>
<p>  <strong>是对网络流量进行管理的协议，</strong>从传统意义上来讲，无非就是传输的带宽、传送的时延、数据的丢包率等，而<strong>提高服务质量无非也就是保证传输的带宽，降低传送的时延，降低数据的丢包率以及时延抖动等</strong>。广义上讲，服务质量涉及网络应用的方方面面，只要是对网络应用有利的措施，其实都是在提高服务质量。因此，从这个意义上来说，防火墙、策略路由、快速转发等也都是提高网络业务服务质量的措施之一。</p>
</li>
</ul>
<p><code>在保证某项业务的质量的同时，也在损害其他业务的服务质量，网络资源是有限的，只要存在网络抢占资源的情况就会出现服务质量的高低。</code></p>
<h3 id="不同设备上的QOS："><a href="#不同设备上的QOS：" class="headerlink" title="不同设备上的QOS："></a>不同设备上的QOS：</h3><ol>
<li><p><strong>防火墙上的QoS：</strong> 防火墙通常可以配置QoS规则，以便在处理流量时根据规则对流量进行分类和优先级处理。这有助于确保关键应用程序的流量获得更高的优先级，从而提高网络性能和安全性。防火墙可以基于IP地址、端口号、协议等条件来进行QoS分类和限制流量速率。</p>
</li>
<li><p><strong>路由器上的QoS：</strong> 路由器在路由决策时可以应用QoS策略，以根据特定的QoS标记或标志来优先路由流量。路由器可以根据流量类型、源地址、目标地址、DSCP标记等来分类和处理流量。此外，路由器还可以实施流量整形和排队策略，以确保高优先级的流量得到及时处理。</p>
</li>
<li><p><strong>交换机上的QoS：</strong> 交换机上的QoS主要集中在局域网内的流量管理。它可以根据交换机上的端口、VLAN、MAC地址、IP地址等因素来进行流量分类和管理。交换机通常实施基于IEEE 802.1p标准的优先级队列（例如，802.1p的三个优先级队列：<strong>高&lt;语音通话&gt;、中&lt;web浏览\文件备份&gt;、低)<strong>，以确保</strong>高优先级的流量</strong>在交换机内的<strong>转发</strong>时得到<strong>更高的优先级</strong>。</p>
</li>
</ol>
<h3 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h3><ul>
<li><p>网络不断发展中，规模越来越大，使互联网流量激增，产生网络堵塞，增加转发时延，严重的时候还会产生丢包，导致业务质量下降甚至不可用，所以要在IP网络上开展实时业务，必须解决网络堵塞业务，最直接的就是增加带宽，但是这无疑是需要巨大成本的，所以QOS就在这时候起到作用了</p>
</li>
<li><p>在带宽有限的情况下，该技术应用一个“有保证”的策略对网络流量进行管理，</p>
</li>
</ul>
<h3 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h3><ul>
<li>流量分类，就是将流量划分为多个优先级或多个服务类，</li>
</ul>
<h3 id="配置：-1"><a href="#配置：-1" class="headerlink" title="配置："></a>配置：</h3><h4 id="进行流分类标记"><a href="#进行流分类标记" class="headerlink" title="进行流分类标记:"></a>进行流分类标记:</h4><ul>
<li><pre><code>  
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Best-Effort(尽力而为):</span><br><span class="line"></span><br><span class="line">#### 概念：</span><br><span class="line"></span><br><span class="line">- 先入先出的规则，对时延、丢包率等性能不做任何保证(默认配置)</span><br><span class="line"></span><br><span class="line">### </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Diffserv(区分服务):</span><br><span class="line"></span><br><span class="line">#### 概念:</span><br><span class="line"></span><br><span class="line">- 针对实时性较强的服务，例如ip电话、视频会议、网络直播等。为这些在网络上开通单独的通道，预留带宽、优先级等资源，其他应用资源必须保证每个**要求服务质量的数据流**让路。保证他们传输数据时的时延和抖动降低为最低限度。**比如消防车和救护车一样，其他车必须为他们让道** ，如果为所有应用都设置单独通道等于没设。指定某项服务的优先级(扩展性高)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### intserv(综合服务):</span><br><span class="line"></span><br><span class="line">#### 概念:</span><br><span class="line"></span><br><span class="line">- Int-Serv服务模型Int-Serv是一个综合服务模型，它可以满足多种QoS需求。该模型使用资源预留协议（RSVP），**RSVP运行在从源端到目的端的每个设备上，可以监视每个流，以防止其消耗资源过多。**这种体系能够明确区分并保证**每一个业务流的服务质量**，为网络提供最细粒度化的服务质量区分。但是，**Inter-Serv模型对设备的要求很高，当网络中的数据流数量很大时，设备的存储和处理能力会遇到很大的压力。**Inter-Serv模型**可扩展性很差**，难以在Internet核心网络实施。(很少使用)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 报文的分类和标记(`区分不同的流量来进行分类`)：</span><br><span class="line"></span><br><span class="line">### 简单流分类：</span><br><span class="line"></span><br><span class="line">#### 概念：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**二层：**802.1Q中PRI字段</span><br><span class="line"></span><br><span class="line">- 802.1p(VLAN    &lt;3bits&gt;)   等于0就是802.1Q(Tga)</span><br><span class="line">- 范围0~7</span><br><span class="line">- ![802.1Q.png](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\4c1d63300c57a7cc46c179665675af0d.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**2.5层：**MPLS的exp位</span><br><span class="line"></span><br><span class="line">- EXP(label    &lt;3bits&gt;)</span><br><span class="line">- 范围0~7</span><br><span class="line">- ![MPLS LABEL.png](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\68374281934b3317e1cd87ce56707a58.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**三层：**IP的ToS(IPP、DSCP)</span><br><span class="line"></span><br><span class="line">- TOS值(前3个bits：IPP&lt;IP priority&gt; IP优先级)  </span><br><span class="line">- 长度8bit（前6bit用于标识优先级，保留最后2bit不使用）</span><br><span class="line">- ​     ![IP TOS.png](C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\863d2dbdfea2c9a384cc972d3b714b97.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 复杂流分类：</span><br><span class="line"></span><br><span class="line">#### 概念：</span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 小知识：</span><br><span class="line"></span><br><span class="line">**BFD(双向故障检测)：** 这是一种高速故障检测机制，两个系统建立BDF会话后，会周期性的发送BDF报文，如果在一									方协商的检测时间没有收到BDF报文，则认为这条通路发生了故障。</span><br><span class="line"></span><br><span class="line">**吞吐率(req/s):**  单位时间内**一次性能测试过程中**网络上**传输的数据量的总和**</span><br><span class="line"></span><br><span class="line">**吞吐量:**  指在一次**性能测试过程中**网络上传输的**数据量的总和**</span><br><span class="line"></span><br><span class="line">**高并发：**  通过设计系统保证并行处理多个请求</span><br><span class="line"></span><br><span class="line">**QPS：** 每秒响应请求数</span><br><span class="line"></span><br><span class="line">**胖AP：**可以单台设置管理模式，例如无线路由器，多内置DHCP、DNS、MAC地址克隆、防火墙等功能</span><br><span class="line"></span><br><span class="line">**瘦AP：**不具备单独配置 或 单独使用的AP，需要搭配无线控制器(ac)来使用。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 准入控制功能(Network Access Contr0l 简称NAC):</span><br><span class="line"></span><br><span class="line">### 定义：</span><br><span class="line"></span><br><span class="line">- NAC是一种网络安全技术，目标是确保只有经过授权的设备和用户才能连接到企业或组织的网络，通俗的说，**网络上有一个“门卫”，只有符合规定的设备和用户才能通过这个门进入网络，不符合规定的设备会被拒绝入内** </span><br><span class="line"></span><br><span class="line">### 与ACL的区别：</span><br><span class="line"></span><br><span class="line">1. **NAC** ：NAC主要用于经过授权的**设备**和用户可以连接到网络，它关注的是对**网络入口**进行管理，验证授权设备和用户**身份**和**合规性** ，然后决定是否允许访问网络。NAC涉及到 **身份验证、设备健康检测、访问策略** 。</span><br><span class="line">2. **ACL：** ACL是一种**规则集** ，用于定义那些**数据包**被允许通过**网络设备** ，并决定那些被拒绝。ACL**用于控制数据包的流量** ，基于：源IP地址、目标IP地址、端口号、协议等进行过滤，**ACL不涉及设备身份验证，只关注&lt;u&gt;数据包&lt;/u&gt;的控制**</span><br><span class="line"></span><br><span class="line">### NAC核心功能：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 802.1x认证（EAPoE 认证）扩展认证协议:</span><br><span class="line"></span><br><span class="line">主要目的是为了结局局域网内用户的接入认证问题</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 与ppp(点对点)认证的区别:</span><br><span class="line"></span><br><span class="line">- **应用场景:**`**ppp**`认证是对单个设备进行身份验证，而`**802.1x**`是对局域网内的设备进行身份验证和授权确保只有授权用户才能访问网络资源</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">- **工作方式：** **ppp认证** 涉及到用户名和密码的验证，客户端和服务器之间进行点对点连接之后进行身份验证     **802.1x认证(eapop)** 使用了更灵活的身份验证方法，通常基于EAP的各种变种</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- **目标方面:**  **ppp认证** 通常指在验证连接的两端，即客户端和服务端之间的互联。主要目的是确保两端的连接都是合法的</span><br><span class="line"></span><br><span class="line">    **802.1x(eapop)**   的主要目标是在局域网或者无线网中  `对连接到网络中的每个设备进行身份验证和授权。`  `它不仅验证设备合法性，还确保设备被分配到适当的网络vlan，实现网络访问控制和分隔`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### eap报文:</span><br><span class="line"></span><br><span class="line">在客户端(client)和设备端(device)eapoe使用eapol报文封装格式，直接承载与lan坏境中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 认证方式:</span><br><span class="line"></span><br><span class="line">- 认证终结：</span><br><span class="line">- 认证透传</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 配置过程：</span><br><span class="line"></span><br><span class="line">- ```bash</span><br><span class="line">    aaa authentication dot1x       					// 开启802.1x认证</span><br><span class="line">    </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h4 id="概念：-12"><a href="#概念：-12" class="headerlink" title="概念："></a>概念：</h4><ul>
<li>802.1X是一个网络认证协议，<strong>主要目的是为了解决局域网用户的接入认证问题</strong>，它就像是一个网络门卫，只有合法的用户才能进入网络。</li>
</ul>
<h4 id="执行过程："><a href="#执行过程：" class="headerlink" title="执行过程："></a>执行过程：</h4><ol>
<li><p><strong>启动认证：</strong> 认证过程通常是在客户端设备试图连接到受保护网络时触发的。客户端通过发送连接请求来启动认证过程，这通常是一个特殊的数据包。</p>
</li>
<li><p><strong>服务端响应：</strong> 当客户端发送连接请求后，网络中的认证服务器会对请求进行响应。这个响应通常是一个EAP-Request&#x2F;Identity消息。EAP-Request&#x2F;Identity消息是认证的开始，要求客户端提供身份信息。</p>
</li>
<li><p><strong>客户端回应：</strong> 客户端接收到EAP-Request&#x2F;Identity消息后，会回应并提供自己的身份信息。这通常是一个标识符，例如用户名。</p>
</li>
<li><p><strong>服务端验证：</strong> 客户端提供身份信息后，认证服务器介入认证过程。认证服务器会验证客户端提供的身份信息是否合法。验证方式取决于认证策略和所使用的EAP方法。验证可以包括用户名和密码的比对、数字证书的验证、双因素认证等。</p>
</li>
<li><p><strong>认证结果：</strong> 根据认证服务器的验证结果，认证服务器会向客户端发送EAP-Success（成功）或EAP-Failure（失败）消息。</p>
<ul>
<li>如果认证成功，客户端将被授权连接到网络，并可以开始访问网络资源。</li>
<li>如果认证失败，客户端将被拒绝连接，无法访问网络资源。</li>
</ul>
</li>
</ol>
<h3 id="Portal认证："><a href="#Portal认证：" class="headerlink" title="Portal认证："></a>Portal认证：</h3><h4 id="特点：-2"><a href="#特点：-2" class="headerlink" title="特点："></a>特点：</h4><ul>
<li>通过浏览器引导用户进行身份认证，用户认证方便，交互友好便捷</li>
<li>不需要安装客户端，减少客户端的配置工作量。</li>
<li>便于运营，可以在Portal页面上开展业务拓展，如广告推送、企业宣传等</li>
<li>由于认证之前<strong>终端需要获取ip</strong>，存在一定的网络安全风险 ，对比802.1x不安全</li>
</ul>
<h4 id="注意事项-802-1x和NAC-："><a href="#注意事项-802-1x和NAC-：" class="headerlink" title="注意事项(802.1x和NAC)："></a>注意事项(802.1x和NAC)：</h4><ul>
<li>802.1X和NAC是<strong>协同工作</strong>的。**<u>802.1X用于用户或设备的身份验证</u><strong>，而</strong><u>NAC用于综合考虑身份验证信息以及其他安全策略</u><strong>，以确定</strong>是否允许设备访问网络资源<strong>。这种联合使用可以</strong>提高网络的安全性<strong>，确保只有</strong>合法和合规**的设备和用户能够连接到网络。</li>
</ul>
<h2 id="BGP-边界路由协议"><a href="#BGP-边界路由协议" class="headerlink" title="BGP(边界路由协议):"></a>BGP(边界路由协议):</h2><h3 id="概念：-13"><a href="#概念：-13" class="headerlink" title="概念："></a>概念：</h3><p>1. </p>
<h2 id="试卷案例命令"><a href="#试卷案例命令" class="headerlink" title="试卷案例命令:"></a>试卷案例命令:</h2><p>**（三）<br>根据下述Vlan规划信息表的要求，在交换机上创建对应的Vlan</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vlan  10          //创建vlan</span><br><span class="line">name 名称        //给vlan命名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">并将交换机的相应端口加入对应的Vlan，端口均为Access类型。</span><br><span class="line">int range eth1/0/3-5         //指定接口</span><br><span class="line">switchport mode access      //将接口模式设置access</span><br><span class="line">switchport access vlan 10     //将接口加入vlan</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">要求SW1、SW2与SW3之间互联接口设置为Trunk接口，且只允许相关业务Vlan通过</span><br><span class="line">int range eth1/0/25-26      //指定接口</span><br><span class="line">switchport mode trunk         //将接口模式设置为trunk</span><br><span class="line">switchport trunk allowed vlan10,20,30,40,100      //只允许相关业务Vlan通过，all为全部</span><br></pre></td></tr></table></figure>







<p>（一）配置VRRP<br>SW1使用本Vlan的倒数第二个可用地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">int vlan 10     //指定vlan</span><br><span class="line">ip address 172.16.10.253 255.255.255.0      </span><br><span class="line">------------------配置ip地址</span><br><span class="line"></span><br><span class="line">SW2使用本Vlan的倒数第三个可用地址</span><br><span class="line">int vlan 10     //指定vlan</span><br><span class="line">ip address 172.16.10.252 255.255.255.0      </span><br><span class="line">----------配置ip地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">要求所有业务Vlan及管理Vlan都使用各自Vlan的最后一个可用IP作为本Vlan的虚拟地址</span><br><span class="line">int vlan 10     //指定vlan</span><br><span class="line">vrrp 1(编号) ip 172.16.10.254       </span><br><span class="line">------//配置虚拟ip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">同时要求SW2作为销售1组、销售2组二个业务群组主网关设备</span><br><span class="line">int vlan 20</span><br><span class="line">vrrp 1 priority 105     </span><br><span class="line">  ----//默认优先级为100</span><br><span class="line"></span><br><span class="line">int vlan 30</span><br><span class="line">vrrp 1 priority 105     //默认优先级为100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SW1作为行政、技术支持、管理等业务群组的主网关设备</span><br><span class="line">int vlan 10</span><br><span class="line">vrrp 1 priority 105     //默认优先级为100</span><br><span class="line"></span><br><span class="line">int vlan 40</span><br><span class="line">vrrp 1 priority 105     //默认优先级为100</span><br><span class="line"></span><br><span class="line">int vlan 100</span><br><span class="line">vrrp 1 priority 105     //默认优先级为100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意:cisco需要开启抢占功能</span><br><span class="line">standby 1 preempt</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>(二)配置MSTP多生成树</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#SW2:</span></span><br><span class="line">在交换机SW1、SW2和SW3之间通过冗余协议来实现 	-销售1组、销售2组等业务优先通过SW2转发</span><br><span class="line">Spanning-tree      //启用生成树</span><br><span class="line">spanning-tree mode mstp     //设置生成树模式为mstp</span><br><span class="line"></span><br><span class="line">spanning-tree mst configuration  //配置MSTP</span><br><span class="line">instance 1 vlan 10,40,100       //Vlan10,40,100和实例1绑定</span><br><span class="line">instance 2 vlan 20,30         //Vlan20,30和实例2绑定</span><br><span class="line">name 域名(名称)              //配置域名</span><br><span class="line">revision 1                 //配置修订等级</span><br><span class="line"></span><br><span class="line">spanning-tree mst 2 priority  0</span><br><span class="line">----------------------配置实例1的优先级，优先级越小的优先权越大，优先级为4096的倍数，默认3万多</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#SW1:</span></span><br><span class="line">---行政、技术支持、管理等业务优先通过SW1转发</span><br><span class="line">Spanning-tree      //启用生成树</span><br><span class="line">spanning-tree mode mstp     //设置生成树模式为mstp</span><br><span class="line"></span><br><span class="line">spanning-tree mst configuration  //配置MSTP</span><br><span class="line">instance 1 vlan 10,40,100       //Vlan10,40,100和实例1绑定</span><br><span class="line">instance 2 vlan 20,30         //Vlan20,30和实例2绑定</span><br><span class="line">name 域名(名称)              //配置域名</span><br><span class="line">revision 1                 //配置修订等级</span><br><span class="line"></span><br><span class="line">spanning-tree mst 1 priority 0     </span><br><span class="line">//配置实例1的优先级，优先级越小的优先权越大，优先级为4096的倍数，默认3万多</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#SW3:</span></span><br><span class="line">Spanning-tree      //启用生成树</span><br><span class="line">spanning-tree mode mstp     //设置生成树模式为mstp</span><br><span class="line"></span><br><span class="line">spanning-tree mst configuration  //配置MSTP</span><br><span class="line">instance 1 vlan 10,40,100       //Vlan10,40,100和实例1绑定</span><br><span class="line">instance 2 vlan 20,30         //Vlan20,30和实例2绑定</span><br><span class="line">name 域名(名称)              //配置域名</span><br><span class="line">revision 1                 //配置修订等级</span><br></pre></td></tr></table></figure>





<p>(四)ssh服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SW1、SW2上设置启用SSH服务</span><br><span class="line"><span class="built_in">enable</span> service ssh-server         //开启SSH登录</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">远程登录账户仅包含“ChinaDCN”，密码为明文“ChinaDCN-ssh”</span><br><span class="line">ine vty 0 8</span><br><span class="line"></span><br><span class="line">transport input ssh     //表示只允许使用ssh登录</span><br><span class="line"></span><br><span class="line">login <span class="built_in">local</span>      //启动本地用户名+密码登录</span><br><span class="line"></span><br><span class="line">Ruijie(config)#username ChinaDCN password ChinaDCN-ssh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">采用SSH方式登录设备时需要输入<span class="built_in">enable</span>密码，密码设置为明文“<span class="built_in">enable</span>”</span><br><span class="line"><span class="built_in">enable</span> password <span class="built_in">enable</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">要求最多允许8个用户同时SSH登陆设备；</span><br><span class="line">Ruijie(config)#line vty 0 7        </span><br><span class="line">---------------//进入Telnet密码配置模式，0 7表示允许共8个用户（即用户0至用户7一共八位用户）</span><br></pre></td></tr></table></figure>







<p>(五) 	端口镜像<br>现需要把多个安全设备分别连接到SW1设备的1&#x2F;0&#x2F;18-19口，通过端口镜像技术把两台核心交换机到防火墙、接入交换机的所有数据流量提交给安全设备进行监控分析。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">monitor session 1 <span class="built_in">source</span> interface eth1/0/18-19</span><br><span class="line">monitor session 1 destination interface eth1/0/20**</span><br><span class="line">--------<span class="built_in">source</span> 源(被复制)</span><br><span class="line">--------destination 目的(复制)</span><br></pre></td></tr></table></figure>









<h2 id="vrf-virtual-routing-and-forwarding虚拟路由表"><a href="#vrf-virtual-routing-and-forwarding虚拟路由表" class="headerlink" title="vrf(virtual routing and forwarding虚拟路由表):"></a>vrf(virtual routing and forwarding虚拟路由表):</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">----------vritual 虚拟的</span><br><span class="line">----------routing 路由</span><br><span class="line">----------forward 转发</span><br></pre></td></tr></table></figure>







<h2 id="sflow-网络资源监视"><a href="#sflow-网络资源监视" class="headerlink" title="sflow(网络资源监视)"></a>sflow(网络资源监视)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sflow agent-address 200.1.1.1  </span><br><span class="line">------配置sflow服务器地址</span><br><span class="line">sflow destination 192.168.1.200 </span><br><span class="line">------配置主机IP </span><br><span class="line">sflow  priority  1 </span><br><span class="line">------配置优先级</span><br><span class="line">switch(config-if)#sflow rate input 10000     配置上行端口采样速率</span><br><span class="line">switch(config-if)#sflow rate output 10000    配置下行端口采样速率</span><br><span class="line">switch(config-if)#sflow counter-intervla 20 间隔为20秒</span><br></pre></td></tr></table></figure>

















<h2 id="无线控制器与接入点："><a href="#无线控制器与接入点：" class="headerlink" title="无线控制器与接入点："></a>无线控制器与接入点：</h2><h3 id="胖AP-fat-和瘦AP-fit-："><a href="#胖AP-fat-和瘦AP-fit-：" class="headerlink" title="胖AP(fat)和瘦AP(fit)："></a>胖AP(fat)和瘦AP(fit)：</h3><p><strong>胖ap：</strong>除了无线路由功能以外一般具备wan，lan两个接口，大多支持DHCP服务器、DNS和MAC地址克隆，以及VPN接入、防火墙等安全功能               		<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20231031145559693.png" alt="image-20231031145559693" style="zoom:50%;" />  			</p>
<ul>
<li><strong>瘦ap：</strong>仅仅作为无线接入点来使用，由无线控制器来进行统一的配置，包括DHCP地址获取等</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20231031145754322.png" alt="image-20231031145754322" style="zoom:50%;" />	



<h3 id="vap（多少个WiFi就创建多少个vap）"><a href="#vap（多少个WiFi就创建多少个vap）" class="headerlink" title="vap（多少个WiFi就创建多少个vap）:"></a>vap（多少个WiFi就创建多少个vap）:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="使用场景："><a href="#使用场景：" class="headerlink" title="使用场景："></a>使用场景：</h3><ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="C:\Users\ROCK_liweier\AppData\Roaming\Typora\typora-user-images\image-20231031151500582.png" alt="image-20231031151500582" style="zoom:50%;" /></li>
</ul>
<h3 id="capwap隧道建立的过程："><a href="#capwap隧道建立的过程：" class="headerlink" title="capwap隧道建立的过程："></a>capwap隧道建立的过程：</h3><p>1. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-----配置基础有线网络  </span><br><span class="line">-----创建ssid</span><br><span class="line">-----创建vap</span><br><span class="line">-----创建ap-group,将vap关联group(300个ap加入了一个组，这个组里关联vap，即代表这300个ap都释放这vap的wifi信号，如果关联了多个vap则300个ap释放多个wifi信号)</span><br><span class="line">-----将AP加进ap组里</span><br><span class="line">设置AC和AP对接的接口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Ruijie (config-wlan)#tunnel <span class="built_in">local</span>   -------&gt;配置为本地转发模式</span><br><span class="line"></span><br><span class="line">Ruijie (config-wlan)#tunnel 8023   -------&gt;配置为集中转发模式</span><br><span class="line">Ruijie(config)#ap-group Ruijie_group</span><br><span class="line">--------创建AP组</span><br><span class="line">Ruijie(config-ap-group)#interface-mapping 2 2     </span><br><span class="line">-------将wlan-config和vlan2进行关联</span><br></pre></td></tr></table></figure>









<h1 id="vrf-虚拟路由转发"><a href="#vrf-虚拟路由转发" class="headerlink" title="vrf(虚拟路由转发)"></a>vrf(虚拟路由转发)</h1><p>1. </p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">XF</div><div class="post-copyright__author_desc">Leviの博客</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/')">企业网络搭建笔记</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=企业网络搭建笔记&amp;url=http://example.com/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E7%AC%94%E8%AE%B0%E6%9C%89%E4%B8%8D%E5%AF%B9%E7%9A%84%E5%9C%B0%E6%96%B9%E5%AE%98%E8%AF%B7%E6%8C%87%E6%AD%A3%E5%9C%A8%E8%AF%84%E8%AE%BA%E5%8C%BA%E4%B8%AD/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>自己写的笔记有不对的地方官请指正在评论区中<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2024/11/15/hello-world/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%81%E4%B8%9A%E7%BD%91%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">企业网搭建笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E4%BD%8D%E6%8D%A2%E7%AE%97"><span class="toc-number">1.1.</span> <span class="toc-text">单位换算:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OSI-%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">OSI 七层模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">1.2.1.</span> <span class="toc-text">物理层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.2.2.</span> <span class="toc-text">数据链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.2.3.</span> <span class="toc-text">网络层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">1.2.4.</span> <span class="toc-text">传输层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%B1%82"><span class="toc-number">1.2.5.</span> <span class="toc-text">会话层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%A4%BA%E5%B1%82"><span class="toc-number">1.2.6.</span> <span class="toc-text">表示层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">1.2.7.</span> <span class="toc-text">应用层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.3.</span> <span class="toc-text">远程连接:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4"><span class="toc-number">1.3.1.</span> <span class="toc-text">指令:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E5%9C%B0%E5%9D%80%E5%88%92%E5%88%86%EF%BC%9A"><span class="toc-number">1.4.</span> <span class="toc-text">IP地址划分：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VLSM-Variable-Length-Subnet-Masking"><span class="toc-number">1.4.1.</span> <span class="toc-text">VLSM(Variable Length Subnet Masking):</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">概念：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ipv6"><span class="toc-number">2.</span> <span class="toc-text">ipv6:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA16%E8%BF%9B%E5%88%B6%E6%95%B0%E7%94%B14%E4%B8%AA%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%9E%84%E6%88%90"><span class="toc-number">2.0.1.</span> <span class="toc-text">一个16进制数由4个二进制数构成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipv6%E7%94%B1%E5%89%8D64%E4%BD%8D%E7%BB%84%E6%88%90%E5%89%8D%E7%BC%80%EF%BC%88%E7%BD%91%E7%BB%9C%E9%83%A8%E5%88%86%EF%BC%89%EF%BC%8C%E5%90%8E64%E4%BD%8D%E7%BB%84%E6%88%90%E6%8E%A5%E5%8F%A3id"><span class="toc-number">2.1.</span> <span class="toc-text">ipv6由前64位组成前缀（网络部分），后64位组成接口id,</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91802-1Q"><span class="toc-number">2.2.</span> <span class="toc-text">VLAN(虚拟局域网802.1Q):</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A"><span class="toc-number">2.2.1.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arp%E6%94%BB%E5%87%BB%EF%BC%9A"><span class="toc-number">2.3.</span> <span class="toc-text">arp攻击：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-1"><span class="toc-number">2.3.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arp%E6%AC%BA%E9%AA%97%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">2.3.2.</span> <span class="toc-text">Arp欺骗原理：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E6%AD%A2arp%E6%94%BB%E5%87%BB%EF%BC%9A"><span class="toc-number">2.4.</span> <span class="toc-text">防止arp攻击：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81ARP%E7%BB%91%E5%AE%9A%EF%BC%9A"><span class="toc-number">2.4.1.</span> <span class="toc-text">静态ARP绑定：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-1"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">指令：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#STP%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.5.</span> <span class="toc-text">STP生成树协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-2"><span class="toc-number">2.5.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stp%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">2.5.2.</span> <span class="toc-text">stp运行原理：&#x2F;&#x2F;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-2"><span class="toc-number">2.5.3.</span> <span class="toc-text">指令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E7%8E%AF%E8%B7%AF%E6%A3%80%E6%B5%8B%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">2.5.4.</span> <span class="toc-text">端口环路检测简介：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-3"><span class="toc-number">2.5.4.1.</span> <span class="toc-text">指令：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RSTP%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">2.6.</span> <span class="toc-text">RSTP生成树协议：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MSTP%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">2.7.</span> <span class="toc-text">MSTP生成树协议：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-3"><span class="toc-number">2.7.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-4"><span class="toc-number">2.7.2.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-number">2.8.</span> <span class="toc-text">端口配置:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9F%E7%8E%87%E5%92%8C%E6%9C%80%E5%A4%A7%E4%BC%A0%E8%BE%93%E5%8D%95%E5%85%83%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.8.1.</span> <span class="toc-text">速率和最大传输单元的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%AE%89%E5%85%A8%EF%BC%9A"><span class="toc-number">2.9.</span> <span class="toc-text">端口安全：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%AE%89%E5%85%A8%E6%A6%82%E5%BF%B5%EF%BC%9A"><span class="toc-number">2.10.</span> <span class="toc-text">端口安全概念：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-5"><span class="toc-number">2.10.1.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SNMP-%E9%99%B7%E8%BF%9B%E9%80%9A%E7%9F%A5"><span class="toc-number">2.11.</span> <span class="toc-text">SNMP(陷进通知):</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88%EF%BC%9A"><span class="toc-number">2.12.</span> <span class="toc-text">链路聚合：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E8%81%9A%E5%90%88%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">2.12.1.</span> <span class="toc-text">链路聚合配置命令：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%92%9F%E9%80%9F%E7%8E%87"><span class="toc-number">2.12.1.1.</span> <span class="toc-text">时钟速率</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E9%95%9C%E5%83%8F-span-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AB%AF%E5%8F%A3%E5%88%86%E6%9E%90-%EF%BC%9A"><span class="toc-number">2.13.</span> <span class="toc-text">端口镜像(span-交换机端口分析)：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-4"><span class="toc-number">2.13.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-number">2.13.2.</span> <span class="toc-text">特点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-6"><span class="toc-number">2.13.3.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vrrp%EF%BC%88%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%97%E4%BD%99%E5%8D%8F%E8%AE%AE%EF%BC%89%EF%BC%9A"><span class="toc-number">2.14.</span> <span class="toc-text">vrrp（虚拟局域网冗余协议）：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-5"><span class="toc-number">2.14.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-7"><span class="toc-number">2.14.2.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DHCP-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E5%88%86%E9%85%8D%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.15.</span> <span class="toc-text">DHCP(动态主机分配协议):</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-6"><span class="toc-number">2.15.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A"><span class="toc-number">2.15.2.</span> <span class="toc-text">DHCP的作用：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="toc-number">2.15.3.</span> <span class="toc-text">DHCP通信过程：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-8"><span class="toc-number">2.15.4.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DHCP-%E4%B8%AD%E7%BB%A7%E4%BB%A3%E7%90%86-DHCP-Relay-%EF%BC%9A"><span class="toc-number">2.16.</span> <span class="toc-text">DHCP 中继代理(DHCP Relay)：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-7"><span class="toc-number">2.16.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-9"><span class="toc-number">2.16.2.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DHCP-snooping-DHCP%E7%9B%91%E5%90%AC-%EF%BC%9A"><span class="toc-number">2.17.</span> <span class="toc-text">DHCP snooping (DHCP监听)：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-8"><span class="toc-number">2.17.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-10"><span class="toc-number">2.17.2.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">2.18.</span> <span class="toc-text">静态路由:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-9"><span class="toc-number">2.18.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-11"><span class="toc-number">2.18.2.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rip%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE-%E5%8D%81%E5%B9%B4%E5%89%8D%E5%B0%B1%E8%A2%AB%E6%B7%98%E6%B1%B0"><span class="toc-number">2.19.</span> <span class="toc-text">Rip动态路由协议(十年前就被淘汰):</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-12"><span class="toc-number">2.19.1.</span> <span class="toc-text">指令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RIP%E7%9A%84%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9B%AE%E6%9B%B4%E6%96%B0%E8%A7%84%E5%88%99%EF%BC%9A"><span class="toc-number">2.19.2.</span> <span class="toc-text">RIP的路由条目更新规则：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PBR-%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1"><span class="toc-number">2.20.</span> <span class="toc-text">PBR(策略路由):</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8E%E6%99%AE%E9%80%9A%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A%E6%99%AE%E9%80%9A%E8%B7%AF%E7%94%B1%E6%98%AF%E6%A0%B9%E6%8D%AE%E7%9B%AE%E6%A0%87%E5%9C%B0%E5%9D%80%E6%9D%A5%E9%80%89%E6%8B%A9%E8%B7%AF%E5%BE%84-%E7%AD%96%E7%95%A5%E8%B7%AF%E7%94%B1%E6%98%AF%E6%A0%B9%E6%8D%AE%E6%BA%90%E5%9C%B0%E5%9D%80%E6%9D%A5%E9%80%89%E6%8B%A9%E8%B7%AF%E5%BE%84"><span class="toc-number">2.20.0.1.</span> <span class="toc-text">与普通路由的区别：普通路由是根据目标地址来选择路径,策略路由是根据源地址来选择路径</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-10"><span class="toc-number">2.20.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A"><span class="toc-number">2.20.2.</span> <span class="toc-text">应用场景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="toc-number">2.20.3.</span> <span class="toc-text">配置：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#acl-%E6%89%A9%E5%B1%95extended-%EF%BC%9A"><span class="toc-number">2.21.</span> <span class="toc-text">acl(扩展extended)：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E5%85%83%E7%BB%84%EF%BC%9A"><span class="toc-number">2.21.1.</span> <span class="toc-text">五元组：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A-1"><span class="toc-number">2.21.1.1.</span> <span class="toc-text">特点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-13"><span class="toc-number">2.21.1.2.</span> <span class="toc-text">指令：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#alc%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">2.21.2.</span> <span class="toc-text">alc工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A-1"><span class="toc-number">2.21.3.</span> <span class="toc-text">应用场景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-14"><span class="toc-number">2.21.4.</span> <span class="toc-text">指令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chap%E8%AE%A4%E8%AF%81-%E6%8C%91%E6%88%98%E6%8F%A1%E6%89%8B%E5%8D%8F%E8%AE%AE-%EF%BC%9A"><span class="toc-number">2.21.5.</span> <span class="toc-text">chap认证(挑战握手协议)：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%9A-15"><span class="toc-number">2.21.5.1.</span> <span class="toc-text">指令：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QOS-%E6%9C%8D%E5%8A%A1%E8%B4%A8%E9%87%8F%EF%BC%8C%E6%B5%81%E9%87%8F%E5%B8%A6%E5%AE%BD%E6%8E%A7%E5%88%B6"><span class="toc-number">2.22.</span> <span class="toc-text">QOS(服务质量，流量带宽控制):</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-11"><span class="toc-number">2.22.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E8%AE%BE%E5%A4%87%E4%B8%8A%E7%9A%84QOS%EF%BC%9A"><span class="toc-number">2.22.2.</span> <span class="toc-text">不同设备上的QOS：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%8C%E6%99%AF%EF%BC%9A"><span class="toc-number">2.22.3.</span> <span class="toc-text">背景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">2.22.4.</span> <span class="toc-text">原理：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%EF%BC%9A-1"><span class="toc-number">2.22.5.</span> <span class="toc-text">配置：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E6%B5%81%E5%88%86%E7%B1%BB%E6%A0%87%E8%AE%B0"><span class="toc-number">2.22.5.1.</span> <span class="toc-text">进行流分类标记:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-12"><span class="toc-number">2.22.5.2.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="toc-number">2.22.5.3.</span> <span class="toc-text">执行过程：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Portal%E8%AE%A4%E8%AF%81%EF%BC%9A"><span class="toc-number">2.22.6.</span> <span class="toc-text">Portal认证：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A-2"><span class="toc-number">2.22.6.1.</span> <span class="toc-text">特点：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-802-1x%E5%92%8CNAC-%EF%BC%9A"><span class="toc-number">2.22.6.2.</span> <span class="toc-text">注意事项(802.1x和NAC)：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BGP-%E8%BE%B9%E7%95%8C%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.23.</span> <span class="toc-text">BGP(边界路由协议):</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%EF%BC%9A-13"><span class="toc-number">2.23.1.</span> <span class="toc-text">概念：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%95%E5%8D%B7%E6%A1%88%E4%BE%8B%E5%91%BD%E4%BB%A4"><span class="toc-number">2.24.</span> <span class="toc-text">试卷案例命令:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vrf-virtual-routing-and-forwarding%E8%99%9A%E6%8B%9F%E8%B7%AF%E7%94%B1%E8%A1%A8"><span class="toc-number">2.25.</span> <span class="toc-text">vrf(virtual routing and forwarding虚拟路由表):</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sflow-%E7%BD%91%E7%BB%9C%E8%B5%84%E6%BA%90%E7%9B%91%E8%A7%86"><span class="toc-number">2.26.</span> <span class="toc-text">sflow(网络资源监视)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E7%BA%BF%E6%8E%A7%E5%88%B6%E5%99%A8%E4%B8%8E%E6%8E%A5%E5%85%A5%E7%82%B9%EF%BC%9A"><span class="toc-number">2.27.</span> <span class="toc-text">无线控制器与接入点：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%96AP-fat-%E5%92%8C%E7%98%A6AP-fit-%EF%BC%9A"><span class="toc-number">2.27.1.</span> <span class="toc-text">胖AP(fat)和瘦AP(fit)：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vap%EF%BC%88%E5%A4%9A%E5%B0%91%E4%B8%AAWiFi%E5%B0%B1%E5%88%9B%E5%BB%BA%E5%A4%9A%E5%B0%91%E4%B8%AAvap%EF%BC%89"><span class="toc-number">2.27.2.</span> <span class="toc-text">vap（多少个WiFi就创建多少个vap）:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A"><span class="toc-number">2.27.3.</span> <span class="toc-text">使用场景：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#capwap%E9%9A%A7%E9%81%93%E5%BB%BA%E7%AB%8B%E7%9A%84%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="toc-number">2.27.4.</span> <span class="toc-text">capwap隧道建立的过程：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vrf-%E8%99%9A%E6%8B%9F%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91"><span class="toc-number">3.</span> <span class="toc-text">vrf(虚拟路由转发)</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/17/%E4%BC%81%E4%B8%9A%E7%BD%91%E7%BB%9C%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/" title="企业网络搭建笔记">企业网络搭建笔记</a><time datetime="2024-11-17T04:48:18.000Z" title="Created 2024-11-17 12:48:18">2024-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/15/hello-world/" title="Hello World">Hello World</a><time datetime="2024-11-15T14:56:48.428Z" title="Created 2024-11-15 22:56:48">2024-11-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="XF" target="_blank">XF</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">1</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E7%AC%94%E8%AE%B0%E6%9C%89%E4%B8%8D%E5%AF%B9%E7%9A%84%E5%9C%B0%E6%96%B9%E5%AE%98%E8%AF%B7%E6%8C%87%E6%AD%A3%E5%9C%A8%E8%AF%84%E8%AE%BA%E5%8C%BA%E4%B8%AD/" style="font-size: 0.88rem;">自己写的笔记有不对的地方官请指正在评论区中<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 XF 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>